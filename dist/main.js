/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/kaboom/dist/kaboom.mjs":
/*!*********************************************!*\
  !*** ./node_modules/kaboom/dist/kaboom.mjs ***!
  \*********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nvar Je=Object.defineProperty,Qt=Object.defineProperties;var Jt=Object.getOwnPropertyDescriptors;var et=Object.getOwnPropertySymbols;var en=Object.prototype.hasOwnProperty,tn=Object.prototype.propertyIsEnumerable;var tt=(t,e,o)=>e in t?Je(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,le=(t,e)=>{for(var o in e||(e={}))en.call(e,o)&&tt(t,o,e[o]);if(et)for(var o of et(e))tn.call(e,o)&&tt(t,o,e[o]);return t},we=(t,e)=>Qt(t,Jt(e));var r=(t,e)=>Je(t,\"name\",{value:e,configurable:!0});var fe=(t,e)=>()=>(t&&(e=t(t=0)),e),nn=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);function nt(t){return t*Math.PI/180}function rt(t){return t*180/Math.PI}function ae(t,e,o){return e>o?ae(t,o,e):Math.min(Math.max(t,e),o)}function De(t,e,o){return t+(e-t)*o}function ve(t,e,o,i,m){return i+(t-e)/(o-e)*(m-i)}function st(t,e,o,i,m){return ae(ve(t,e,o,i,m),i,m)}function f(...t){if(t.length===0)return f(0,0);if(t.length===1){if(typeof t[0]==\"number\")return f(t[0],t[0]);if(Re(t[0]))return f(t[0].x,t[0].y);if(Array.isArray(t[0])&&t[0].length===2)return f.apply(null,t[0])}return{x:t[0],y:t[1],clone(){return f(this.x,this.y)},add(...e){let o=f(...e);return f(this.x+o.x,this.y+o.y)},sub(...e){let o=f(...e);return f(this.x-o.x,this.y-o.y)},scale(e){return f(this.x*e,this.y*e)},dist(...e){let o=f(...e);return Math.sqrt((this.x-o.x)*(this.x-o.x)+(this.y-o.y)*(this.y-o.y))},len(){return this.dist(f(0,0))},unit(){return this.scale(1/this.len())},normal(){return f(this.y,-this.x)},dot(...e){let o=f(...e);return f(this.x*o.x,this.y*o.y)},angle(...e){let o=f(...e);return Math.atan2(this.y-o.y,this.x-o.x)},lerp(e,o){return f(De(this.x,e.x,o),De(this.y,e.y,o))},eq(e){return this.x===e.x&&this.y===e.y},str(){return`(${this.x}, ${this.y})`}}}function ot(t){return f(Math.cos(t),Math.sin(t))}function Te(t,e,o){return{x:t,y:e,z:o,xy(){return f(this.x,this.y)}}}function Re(t){return t!==void 0&&t.x!==void 0&&t.y!==void 0}function it(t){return t!==void 0&&t.x!==void 0&&t.y!==void 0&&t.z!==void 0}function ye(t){return t!==void 0&&t.r!==void 0&&t.g!==void 0&&t.b!==void 0&&t.a!==void 0}function at(t){if(t!==void 0&&Array.isArray(t.m)&&t.m.length===16)return t}function Ve(...t){if(t.length===0)return Y();if(t.length===1){if(ye(t[0]))return Y(t[0]);if(Array.isArray(t[0])&&t[0].length===3)return Ve.apply(null,t[0])}return Y(t[0],t[1],t[2],1)}function Y(...t){var e;if(t.length===0)return Y(1,1,1,1);if(t.length===1){if(ye(t[0]))return Y(t[0].r,t[0].g,t[0].b,t[0].a);if(Array.isArray(t[0])&&t[0].length===4)return Y.apply(null,t[0])}return{r:t[0],g:t[1],b:t[2],a:(e=t[3])!=null?e:1,clone(){return Y(this.r,this.g,this.b,this.a)},lighten(o){return Y(this.r+o,this.g+o,this.b+o,this.a)},darken(o){return this.lighten(-o)},invert(){return Y(1-this.r,1-this.g,1-this.b,this.a)},isDark(o=.5){return this.r+this.g+this.b<3*o},isLight(o=.5){return this.r+this.g+this.b>3*o},eq(o){return this.r===o.r&&this.g===o.g&&this.b===o.g&&this.a===o.a}}}function oe(t,e,o,i){return{x:t,y:e,w:o,h:i,clone(){return oe(this.x,this.y,this.w,this.h)},eq(m){return this.x===m.x&&this.y===m.y&&this.w===m.w&&this.h===m.h}}}function ee(t){return{m:t?[...t]:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],clone(){return ee(this.m)},mult(e){let o=[];for(let i=0;i<4;i++)for(let m=0;m<4;m++)o[i*4+m]=this.m[0*4+m]*e.m[i*4+0]+this.m[1*4+m]*e.m[i*4+1]+this.m[2*4+m]*e.m[i*4+2]+this.m[3*4+m]*e.m[i*4+3];return ee(o)},multVec4(e){return{x:e.x*this.m[0]+e.y*this.m[4]+e.z*this.m[8]+e.w*this.m[12],y:e.x*this.m[1]+e.y*this.m[5]+e.z*this.m[9]+e.w*this.m[13],z:e.x*this.m[2]+e.y*this.m[6]+e.z*this.m[10]+e.w*this.m[14],w:e.x*this.m[3]+e.y*this.m[7]+e.z*this.m[11]+e.w*this.m[15]}},multVec3(e){let o=this.multVec4({x:e.x,y:e.y,z:e.z,w:1});return Te(o.x,o.y,o.z)},multVec2(e){return f(e.x*this.m[0]+e.y*this.m[4]+0*this.m[8]+1*this.m[12],e.x*this.m[1]+e.y*this.m[5]+0*this.m[9]+1*this.m[13])},translate(e){return this.mult(ee([1,0,0,0,0,1,0,0,0,0,1,0,e.x,e.y,0,1]))},scale(e){return this.mult(ee([e.x,0,0,0,0,e.y,0,0,0,0,1,0,0,0,0,1]))},rotateX(e){return this.mult(ee([1,0,0,0,0,Math.cos(e),-Math.sin(e),0,0,Math.sin(e),Math.cos(e),0,0,0,0,1]))},rotateY(e){return this.mult(ee([Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1]))},rotateZ(e){return this.mult(ee([Math.cos(e),-Math.sin(e),0,0,Math.sin(e),Math.cos(e),0,0,0,0,1,0,0,0,0,1]))},invert(){let e=[],o=this.m[10]*this.m[15]-this.m[14]*this.m[11],i=this.m[9]*this.m[15]-this.m[13]*this.m[11],m=this.m[9]*this.m[14]-this.m[13]*this.m[10],v=this.m[8]*this.m[15]-this.m[12]*this.m[11],A=this.m[8]*this.m[14]-this.m[12]*this.m[10],R=this.m[8]*this.m[13]-this.m[12]*this.m[9],$=this.m[6]*this.m[15]-this.m[14]*this.m[7],k=this.m[5]*this.m[15]-this.m[13]*this.m[7],I=this.m[5]*this.m[14]-this.m[13]*this.m[6],j=this.m[4]*this.m[15]-this.m[12]*this.m[7],T=this.m[4]*this.m[14]-this.m[12]*this.m[6],w=this.m[5]*this.m[15]-this.m[13]*this.m[7],S=this.m[4]*this.m[13]-this.m[12]*this.m[5],U=this.m[6]*this.m[11]-this.m[10]*this.m[7],B=this.m[5]*this.m[11]-this.m[9]*this.m[7],_=this.m[5]*this.m[10]-this.m[9]*this.m[6],G=this.m[4]*this.m[11]-this.m[8]*this.m[7],y=this.m[4]*this.m[10]-this.m[8]*this.m[6],H=this.m[4]*this.m[9]-this.m[8]*this.m[5];e[0]=this.m[5]*o-this.m[6]*i+this.m[7]*m,e[4]=-(this.m[4]*o-this.m[6]*v+this.m[7]*A),e[8]=this.m[4]*i-this.m[5]*v+this.m[7]*R,e[12]=-(this.m[4]*m-this.m[5]*A+this.m[6]*R),e[1]=-(this.m[1]*o-this.m[2]*i+this.m[3]*m),e[5]=this.m[0]*o-this.m[2]*v+this.m[3]*A,e[9]=-(this.m[0]*i-this.m[1]*v+this.m[3]*R),e[13]=this.m[0]*m-this.m[1]*A+this.m[2]*R,e[2]=this.m[1]*$-this.m[2]*k+this.m[3]*I,e[6]=-(this.m[0]*$-this.m[2]*j+this.m[3]*T),e[10]=this.m[0]*w-this.m[1]*j+this.m[3]*S,e[14]=-(this.m[0]*I-this.m[1]*T+this.m[2]*S),e[3]=-(this.m[1]*U-this.m[2]*B+this.m[3]*_),e[7]=this.m[0]*U-this.m[2]*G+this.m[3]*y,e[11]=-(this.m[0]*B-this.m[1]*G+this.m[3]*H),e[15]=this.m[0]*_-this.m[1]*y+this.m[2]*H;let M=this.m[0]*e[0]+this.m[1]*e[4]+this.m[2]*e[8]+this.m[3]*e[12];for(let q=0;q<4;q++)for(let J=0;J<4;J++)e[q*4+J]*=1/M;return ee(e)}}}function ut(t,e,o){return t+(Math.sin(o)+1)/2*(e-t)}function Xe(t){return{seed:t,gen(...e){if(e.length===0)return this.seed=(rn*this.seed+sn)%ct,this.seed/ct;if(e.length===1){if(typeof e[0]==\"number\")return this.gen(0,e[0]);if(Re(e[0]))return this.gen(f(0,0),e[0]);if(ye(e[0]))return this.gen(Y(0,0,0,0),e[0])}else if(e.length===2){if(typeof e[0]==\"number\"&&typeof e[1]==\"number\")return this.gen()*(e[1]-e[0])+e[0];if(Re(e[0])&&Re(e[1]))return f(this.gen(e[0].x,e[1].x),this.gen(e[0].y,e[1].y));if(ye(e[0])&&ye(e[1]))return Y(this.gen(e[0].r,e[1].r),this.gen(e[0].g,e[1].g),this.gen(e[0].b,e[1].b),this.gen(e[0].a,e[1].a))}}}}function ft(t){dt.seed=t}function Pe(...t){return dt.gen(...t)}function ht(t){return Pe()<=t}function mt(t){return t[Math.floor(Pe(t.length))]}function Ye(t,e){return t.p2.x>=e.p1.x&&t.p1.x<=e.p2.x&&t.p2.y>=e.p1.y&&t.p1.y<=e.p2.y}function lt(t,e){return t.p2.x>e.p1.x&&t.p1.x<e.p2.x&&t.p2.y>e.p1.y&&t.p1.y<e.p2.y}function pt(t,e){return e.x>=t.p1.x&&e.x<=t.p2.x&&e.y>=t.p1.y&&e.y<t.p2.y}var rn,sn,ct,dt,xe=fe(()=>{r(nt,\"deg2rad\");r(rt,\"rad2deg\");r(ae,\"clamp\");r(De,\"lerp\");r(ve,\"map\");r(st,\"mapc\");r(f,\"vec2\");r(ot,\"vec2FromAngle\");r(Te,\"vec3\");r(Re,\"isVec2\");r(it,\"isVec3\");r(ye,\"isColor\");r(at,\"isMat4\");r(Ve,\"rgb\");r(Y,\"rgba\");r(oe,\"quad\");r(ee,\"mat4\");r(ut,\"wave\");rn=1103515245,sn=12345,ct=2147483648,dt=Xe(Date.now());r(Xe,\"makeRng\");r(ft,\"randSeed\");r(Pe,\"rand\");r(ht,\"chance\");r(mt,\"choose\");r(Ye,\"colRectRect\");r(lt,\"overlapRectRect\");r(pt,\"colRectPt\")});function $e(t,e){let o=typeof t,i=typeof e;if(o!==i)return!1;if(o===\"object\"&&i===\"object\"){let m=Object.keys(t),v=Object.keys(e);if(m.length!==v.length)return!1;for(let A of m){let R=t[A],$=e[A];if(!(typeof R==\"function\"&&typeof $==\"function\")&&!$e(R,$))return!1}return!0}return t===e}var bt=fe(()=>{r($e,\"deepEq\")});function Le(t){switch(t){case\"topleft\":return f(-1,-1);case\"top\":return f(0,-1);case\"topright\":return f(1,-1);case\"left\":return f(-1,0);case\"center\":return f(0,0);case\"right\":return f(1,0);case\"botleft\":return f(-1,1);case\"bot\":return f(0,1);case\"botright\":return f(1,1);default:return t}}function xt(t,e){let o=(()=>{switch(e.texFilter){case\"linear\":return t.LINEAR;case\"nearest\":return t.NEAREST;default:return t.NEAREST}})(),i=(()=>{var K;let h=A(We,Ke),x=v(new ImageData(new Uint8ClampedArray([255,255,255,255]),1,1)),b=(K=e.clearColor)!=null?K:Y(0,0,0,1);t.clearColor(b.r,b.g,b.b,b.a),t.enable(t.BLEND),t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);let L=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,L),t.bufferData(t.ARRAY_BUFFER,Ne*4,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null);let z=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,z),t.bufferData(t.ELEMENT_ARRAY_BUFFER,Ne*2,t.DYNAMIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);let V=v(new ImageData(new Uint8ClampedArray([128,128,128,255,190,190,190,255,190,190,190,255,128,128,128,255]),2,2));return{drawCalls:0,lastDrawCalls:0,defProg:h,curProg:h,defTex:x,curTex:x,curUniform:{},vbuf:L,ibuf:z,vqueue:[],iqueue:[],transform:ee(),transformStack:[],clearColor:b,bgTex:V}})();I(),j();function m(h){return Math.log(h)/Math.log(2)%1==0}r(m,\"powerOfTwo\");function v(h){let x=t.createTexture();t.bindTexture(t.TEXTURE_2D,x),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,h),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,o);let b=(()=>m(h.width)&&m(h.height)?t.REPEAT:t.CLAMP_TO_EDGE)();return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,b),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,b),t.bindTexture(t.TEXTURE_2D,null),{width:h.width,height:h.height,bind(){t.bindTexture(t.TEXTURE_2D,x)},unbind(){t.bindTexture(t.TEXTURE_2D,null)}}}r(v,\"makeTex\");function A(h=We,x=Ke){let b,L=on.replace(\"{{user}}\",h!=null?h:We),z=an.replace(\"{{user}}\",x!=null?x:Ke),V=t.createShader(t.VERTEX_SHADER),K=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(V,L),t.shaderSource(K,z),t.compileShader(V),t.compileShader(K),b=t.getShaderInfoLog(V))throw new Error(b);if(b=t.getShaderInfoLog(K))throw new Error(b);let C=t.createProgram();if(t.attachShader(C,V),t.attachShader(C,K),t.bindAttribLocation(C,0,\"a_pos\"),t.bindAttribLocation(C,1,\"a_uv\"),t.bindAttribLocation(C,2,\"a_color\"),t.linkProgram(C),(b=t.getProgramInfoLog(C))&&b!==`\n`)throw new Error(b);return{bind(){t.useProgram(C)},unbind(){t.useProgram(null)},bindAttribs(){t.vertexAttribPointer(0,3,t.FLOAT,!1,Ie*4,0),t.enableVertexAttribArray(0),t.vertexAttribPointer(1,2,t.FLOAT,!1,Ie*4,12),t.enableVertexAttribArray(1),t.vertexAttribPointer(2,4,t.FLOAT,!1,Ie*4,20),t.enableVertexAttribArray(2)},send(P){this.bind();for(let X in P){let F=P[X],Z=t.getUniformLocation(C,X);typeof F==\"number\"?t.uniform1f(Z,F):at(F)?t.uniformMatrix4fv(Z,!1,new Float32Array(F.m)):ye(F)?t.uniform4f(Z,F.r,F.g,F.b,F.a):it(F)?t.uniform3f(Z,F.x,F.y,F.z):Re(F)&&t.uniform2f(Z,F.x,F.y)}this.unbind()}}}r(A,\"makeProgram\");function R(h,x,b,L){let z=h.width/x,V=h.height/b,K=1/z,C=1/V,P={},X=L.split(\"\").entries();for(let[F,Z]of X)P[Z]=f(F%z*K,Math.floor(F/z)*C);return{tex:h,map:P,qw:K,qh:C}}r(R,\"makeFont\");function $(h,x,b=i.defTex,L=i.defProg,z={}){b=b!=null?b:i.defTex,L=L!=null?L:i.defProg,(b!==i.curTex||L!==i.curProg||!$e(i.curUniform,z)||i.vqueue.length+h.length*Ie>Ne||i.iqueue.length+x.length>Ne)&&k(),i.curTex=b,i.curProg=L,i.curUniform=z;let V=x.map(C=>C+i.vqueue.length/Ie),K=h.map(C=>{let P=w(i.transform.multVec2(C.pos.xy()));return[P.x,P.y,C.pos.z,C.uv.x,C.uv.y,C.color.r,C.color.g,C.color.b,C.color.a]}).flat();V.forEach(C=>i.iqueue.push(C)),K.forEach(C=>i.vqueue.push(C))}r($,\"drawRaw\");function k(){!i.curTex||!i.curProg||i.vqueue.length===0||i.iqueue.length===0||(i.curProg.send(i.curUniform),t.bindBuffer(t.ARRAY_BUFFER,i.vbuf),t.bufferSubData(t.ARRAY_BUFFER,0,new Float32Array(i.vqueue)),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i.ibuf),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,new Uint16Array(i.iqueue)),i.curProg.bind(),i.curProg.bindAttribs(),i.curTex.bind(),t.drawElements(t.TRIANGLES,i.iqueue.length,t.UNSIGNED_SHORT,0),i.curTex.unbind(),i.curProg.unbind(),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),i.iqueue=[],i.vqueue=[],i.drawCalls++)}r(k,\"flush\");function I(){t.clear(t.COLOR_BUFFER_BIT),e.clearColor||q({width:he(),height:pe(),quad:oe(0,0,he()*be()/yt,pe()*be()/yt),tex:i.bgTex}),i.drawCalls=0,i.transformStack=[],i.transform=ee()}r(I,\"frameStart\");function j(){k(),i.lastDrawCalls=i.drawCalls}r(j,\"frameEnd\");function T(){return i.lastDrawCalls}r(T,\"drawCalls\");function w(h){return f(h.x/he()*2-1,-h.y/pe()*2+1)}r(w,\"toNDC\");function S(h){i.transform=h.clone()}r(S,\"pushMatrix\");function U(h){!h||h.x===0&&h.y===0||(i.transform=i.transform.translate(h))}r(U,\"pushTranslate\");function B(h){!h||h.x===1&&h.y===1||(i.transform=i.transform.scale(h))}r(B,\"pushScale\");function _(h){!h||(i.transform=i.transform.rotateX(h))}r(_,\"pushRotateX\");function G(h){!h||(i.transform=i.transform.rotateY(h))}r(G,\"pushRotateY\");function y(h){!h||(i.transform=i.transform.rotateZ(h))}r(y,\"pushRotateZ\");function H(){i.transformStack.push(i.transform.clone())}r(H,\"pushTransform\");function M(){i.transformStack.length>0&&(i.transform=i.transformStack.pop())}r(M,\"popTransform\");function q(h={}){var Z,re;let x=h.width||0,b=h.height||0,L=h.pos||f(0,0),V=Le(h.origin||He).dot(f(x,b).scale(-.5)),K=f((Z=h.scale)!=null?Z:1),C=h.rot||0,P=h.quad||oe(0,0,1,1),X=1-((re=h.z)!=null?re:0),F=h.color||Y(1,1,1,1);H(),U(L),B(K),y(C),U(V),$([{pos:Te(-x/2,b/2,X),uv:f(P.x,P.y+P.h),color:F},{pos:Te(-x/2,-b/2,X),uv:f(P.x,P.y),color:F},{pos:Te(x/2,-b/2,X),uv:f(P.x+P.w,P.y),color:F},{pos:Te(x/2,b/2,X),uv:f(P.x+P.w,P.y+P.h),color:F}],[0,1,3,1,2,3],h.tex,h.prog,h.uniform),M()}r(q,\"drawQuad\");function J(h,x={}){var V;let b=(V=x.quad)!=null?V:oe(0,0,1,1),L=h.width*b.w,z=h.height*b.h;q(we(le({},x),{tex:h,quad:b,width:L,height:z}))}r(J,\"drawTexture\");function E(h,x,b,L={}){q(we(le({},L),{pos:h,width:x,height:b}))}r(E,\"drawRect\");function O(h,x,b,L={}){let z=Le(L.origin||He).dot(f(x,b)).scale(.5),V=h.add(f(-x/2,-b/2)).sub(z),K=h.add(f(-x/2,b/2)).sub(z),C=h.add(f(x/2,b/2)).sub(z),P=h.add(f(x/2,-b/2)).sub(z);te(V,K,L),te(K,C,L),te(C,P,L),te(P,V,L)}r(O,\"drawRectStroke\");function te(h,x,b={}){let L=b.width||1,z=h.dist(x),V=Math.PI/2-h.angle(x);q(we(le({},b),{pos:h.add(x).scale(.5),width:L,height:z,rot:V,origin:\"center\"}))}r(te,\"drawLine\");function ne(h,x,b={}){let L=(h+\"\").split(\"\"),z=x.qw*x.tex.width,V=x.qh*x.tex.height,K=b.size||V,C=f(K/V).dot(f(b.scale||1)),P=C.x*z,X=C.y*V,F=0,Z=X,re=0,ge=[[]];for(let ie of L)(ie===`\n`||(b.width?F+P>b.width:!1))&&(Z+=X,F=0,ge.push([])),ie!==`\n`&&(ge[ge.length-1].push(ie),F+=P),re=Math.max(re,F);b.width&&(re=b.width);let Fe=[],Ge=f(b.pos||0),se=Le(b.origin||He).scale(.5),me=-se.x*P-(se.x+.5)*(re-P),Ce=-se.y*X-(se.y+.5)*(Z-X);return ge.forEach((ie,Ue)=>{let Me=(re-ie.length*P)*(se.x+.5);ie.forEach((Ae,Be)=>{let _e=x.map[Ae],je=Be*P,qe=Ue*X;_e&&Fe.push({tex:x.tex,quad:oe(_e.x,_e.y,x.qw,x.qh),ch:Ae,pos:f(Ge.x+je+me+Me,Ge.y+qe+Ce),color:b.color,origin:b.origin,scale:C,z:b.z})})}),{width:re,height:Z,chars:Fe}}r(ne,\"fmtText\");function ue(h,x,b={}){ce(ne(h,x,b))}r(ue,\"drawText\");function ce(h){for(let x of h.chars)q({tex:x.tex,width:x.tex.width*x.quad.w,height:x.tex.height*x.quad.h,pos:x.pos,scale:x.scale,color:x.color,quad:x.quad,origin:\"center\",z:x.z})}r(ce,\"drawFmtText\");function he(){return t.drawingBufferWidth/be()}r(he,\"width\");function pe(){return t.drawingBufferHeight/be()}r(pe,\"height\");function be(){var h;return(h=e.scale)!=null?h:1}r(be,\"scale\");function Ee(){return i.clearColor.clone()}return r(Ee,\"clearColor\"),{width:he,height:pe,scale:be,makeTex:v,makeProgram:A,makeFont:R,drawTexture:J,drawText:ue,drawFmtText:ce,drawRect:E,drawRectStroke:O,drawLine:te,fmtText:ne,frameStart:I,frameEnd:j,pushTransform:H,popTransform:M,pushMatrix:S,drawCalls:T,clearColor:Ee}}var He,Ie,Ne,yt,on,an,We,Ke,gt=fe(()=>{xe();bt();He=\"topleft\",Ie=9,Ne=65536,yt=64,on=`\nattribute vec3 a_pos;\nattribute vec2 a_uv;\nattribute vec4 a_color;\n\nvarying vec3 v_pos;\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nvec4 def_vert() {\n\treturn vec4(a_pos, 1.0);\n}\n\n{{user}}\n\nvoid main() {\n\tvec4 pos = vert(a_pos, a_uv, a_color);\n\tv_pos = a_pos;\n\tv_uv = a_uv;\n\tv_color = a_color;\n\tgl_Position = pos;\n}\n`,an=`\nprecision mediump float;\n\nvarying vec3 v_pos;\nvarying vec2 v_uv;\nvarying vec4 v_color;\n\nuniform sampler2D u_tex;\n\nvec4 def_frag() {\n\treturn v_color * texture2D(u_tex, v_uv);\n}\n\n{{user}}\n\nvoid main() {\n\tgl_FragColor = frag(v_pos, v_uv, v_color, u_tex);\n\tif (gl_FragColor.a == 0.0) {\n\t\tdiscard;\n\t}\n}\n`,We=`\nvec4 vert(vec3 pos, vec2 uv, vec4 color) {\n\treturn def_vert();\n}\n`,Ke=`\nvec4 frag(vec3 pos, vec2 uv, vec4 color, sampler2D tex) {\n\treturn def_frag();\n}\n`;r(Le,\"originPt\");r(xt,\"gfxInit\")});function wt(t){return t===\"pressed\"||t===\"rpressed\"?\"down\":t===\"released\"?\"up\":t}function vt(t={}){var q,J;let e={canvas:(q=t.canvas)!=null?q:(()=>{var O;let E=document.createElement(\"canvas\");return((O=t.root)!=null?O:document.body).appendChild(E),E})(),keyStates:{},charInputted:[],mouseState:\"up\",mousePos:f(0,0),time:0,realTime:0,skipTime:!1,dt:0,scale:(J=t.scale)!=null?J:1,isTouch:!1,loopID:null,stopped:!1,fps:0,fpsBuf:[],fpsTimer:0},o={ArrowLeft:\"left\",ArrowRight:\"right\",ArrowUp:\"up\",ArrowDown:\"down\",\" \":\"space\"},i=[\"space\",\"left\",\"right\",\"up\",\"down\",\"tab\",\"f1\",\"f2\",\"f3\",\"f4\",\"f5\",\"f6\",\"f7\",\"f8\",\"f9\",\"f10\",\"f11\"];t.fullscreen?(e.canvas.width=window.innerWidth,e.canvas.height=window.innerHeight):(e.canvas.width=(t.width||640)*e.scale,e.canvas.height=(t.height||480)*e.scale);let m=[\"outline: none\",\"cursor: default\"];t.crisp&&(m.push(\"image-rendering: pixelated\"),m.push(\"image-rendering: crisp-edges\")),e.canvas.style=m.join(\";\"),e.canvas.setAttribute(\"tabindex\",\"0\");let v=e.canvas.getContext(\"webgl\",{antialias:!0,depth:!0,stencil:!0,alpha:!0,preserveDrawingBuffer:!0});e.isTouch=\"ontouchstart\"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0,e.canvas.addEventListener(\"mousemove\",E=>{e.mousePos=f(E.offsetX,E.offsetY).scale(1/e.scale)}),e.canvas.addEventListener(\"mousedown\",()=>{e.mouseState=\"pressed\"}),e.canvas.addEventListener(\"mouseup\",()=>{e.mouseState=\"released\"}),e.canvas.addEventListener(\"touchstart\",E=>{let O=E.touches[0];e.mousePos=f(O.clientX,O.clientY).scale(1/e.scale),e.mouseState=\"pressed\"}),e.canvas.addEventListener(\"touchmove\",E=>{let O=E.touches[0];e.mousePos=f(O.clientX,O.clientY).scale(1/e.scale)}),e.canvas.addEventListener(\"keydown\",E=>{let O=o[E.key]||E.key.toLowerCase();i.includes(O)&&E.preventDefault(),O.length===1&&e.charInputted.push(O),O===\"space\"&&e.charInputted.push(\" \"),E.repeat?e.keyStates[O]=\"rpressed\":e.keyStates[O]=\"pressed\"}),e.canvas.addEventListener(\"keyup\",E=>{let O=o[E.key]||E.key.toLowerCase();e.keyStates[O]=\"released\"}),e.canvas.focus(),document.addEventListener(\"visibilitychange\",()=>{switch(document.visibilityState){case\"visible\":e.skipTime=!0;break;case\"hidden\":break}});function A(){return e.mousePos.clone()}r(A,\"mousePos\");function R(){return e.mouseState===\"pressed\"}r(R,\"mouseClicked\");function $(){return e.mouseState===\"pressed\"||e.mouseState===\"down\"}r($,\"mouseDown\");function k(){return e.mouseState===\"released\"}r(k,\"mouseReleased\");function I(E){return e.keyStates[E]===\"pressed\"}r(I,\"keyPressed\");function j(E){return e.keyStates[E]===\"pressed\"||e.keyStates[E]===\"rpressed\"}r(j,\"keyPressedRep\");function T(E){return e.keyStates[E]===\"pressed\"||e.keyStates[E]===\"rpressed\"||e.keyStates[E]===\"down\"}r(T,\"keyDown\");function w(E){return e.keyStates[E]===\"released\"}r(w,\"keyReleased\");function S(){return[...e.charInputted]}r(S,\"charInputted\");function U(){return e.dt}r(U,\"dt\");function B(){return e.time}r(B,\"time\");function _(){return e.fps}r(_,\"fps\");function G(){return e.canvas.toDataURL()}r(G,\"screenshot\");function y(E){return E&&(e.canvas.style.cursor=E!=null?E:\"default\"),e.canvas.style.cursor}r(y,\"cursor\");function H(E){let O=r(te=>{let ne=te/1e3,ue=ne-e.realTime;e.realTime=ne,e.skipTime||(e.dt=ue,e.time+=e.dt,e.fpsBuf.push(1/e.dt),e.fpsTimer+=e.dt,e.fpsTimer>=1&&(e.fpsTimer=0,e.fps=Math.round(e.fpsBuf.reduce((ce,he)=>ce+he)/e.fpsBuf.length),e.fpsBuf=[])),e.skipTime=!1,E();for(let ce in e.keyStates)e.keyStates[ce]=wt(e.keyStates[ce]);e.mouseState=wt(e.mouseState),e.charInputted=[],e.stopped||(e.loopID=requestAnimationFrame(O))},\"frame\");e.loopID=requestAnimationFrame(O)}r(H,\"run\");function M(){cancelAnimationFrame(e.loopID),e.stopped=!0}return r(M,\"quit\"),{gl:v,mousePos:A,keyDown:T,keyPressed:I,keyPressedRep:j,keyReleased:w,mouseDown:$,mouseClicked:R,mouseReleased:k,charInputted:S,cursor:y,dt:U,time:B,fps:_,screenshot:G,run:H,quit:M}}var Rt=fe(()=>{xe();r(wt,\"processBtnState\");r(vt,\"appInit\")});function Et(){let t=(()=>{let m=new(window.AudioContext||window.webkitAudioContext),v=m.createGain(),A=v;return A.connect(m.destination),{ctx:m,gainNode:v,masterNode:A}})();function e(m){return m!==void 0&&(t.gainNode.gain.value=ae(m,Tt,St)),t.gainNode.gain.value}r(e,\"volume\");function o(m,v={loop:!1,volume:1,speed:1,detune:0,seek:0}){var w;let A=!1,R=t.ctx.createBufferSource();R.buffer=m,R.loop=!!v.loop;let $=t.ctx.createGain();R.connect($),$.connect(t.masterNode);let k=(w=v.seek)!=null?w:0;R.start(0,k);let I=t.ctx.currentTime-k,j=null,T={stop(){A||(this.pause(),I=t.ctx.currentTime)},play(S){if(!A)return;let U=R;R=t.ctx.createBufferSource(),R.buffer=U.buffer,R.loop=U.loop,R.playbackRate.value=U.playbackRate.value,R.detune&&(R.detune.value=U.detune.value),R.connect($);let B=S!=null?S:this.time();R.start(0,B),I=t.ctx.currentTime-B,A=!1,j=null},pause(){A||(R.stop(),A=!0,j=t.ctx.currentTime)},paused(){return A},stopped(){return A},speed(S){return S!==void 0&&(R.playbackRate.value=ae(S,un,cn)),R.playbackRate.value},detune(S){return R.detune?(S!==void 0&&(R.detune.value=ae(S,dn,fn)),R.detune.value):0},volume(S){return S!==void 0&&($.gain.value=ae(S,Tt,St)),$.gain.value},loop(){R.loop=!0},unloop(){R.loop=!1},duration(){return m.duration},time(){return A?j-I:t.ctx.currentTime-I}};return T.speed(v.speed),T.detune(v.detune),T.volume(v.volume),T}r(o,\"play\");function i(){return t.ctx}return r(i,\"ctx\"),{ctx:i,volume:e,play:o}}var Tt,St,un,cn,dn,fn,Ct=fe(()=>{xe();Tt=0,St=3,un=0,cn=3,dn=-1200,fn=1200;r(Et,\"audioInit\")});var At,_t=fe(()=>{At=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAvgAAAAICAYAAACML4vTAAAAAXNSR0IArs4c6QAABo1JREFUeJzdW9uO5SgMJKv9/1/OPnQnDabKVQb6zGgtjeYkvmJsYwh9tQLc931//7yu63retdba+/4hTZ6ZDMQ3wHVdPe1kXk/60He2D/J7HLMhGyOwHQKji/o/BYmv40DecRq+cfgr8l8dhBfRLPF3v6F9Cu/ObwFPYxRBFptE7mA/wQ2yWMwI/1r+y3Bq/h4H3TwJ3fl16xcz4UfQPB+oplF9QJ7id+SjMVjz/wf5e5rK+hKfB9+a86PsZTIm+7P6942jufsqSvg7/END5WSg6ojLt7uurcjL6v8pfQ4doinIL9v+f4HTMfQ3gopR5gOQ+6jviPj7EfLvqQGsQFiXb/B7KMBGc/rQ3x1ONuHmBmOQfd93XwDVguPI/3Uw/fc8Dz5s4/xMogU/xScNKILJb4W5Q/YyXtt+IWcyF+GzMajY7ehZbCK5vf2sGczmJ+J6O6J8pT8dB5HPwPU706/knsjfVRlxvhje0Zn5H+F/m/+kf6uA1oxqPVD1Jeqj+kHuRr5x0ZzzU8nJANrCalDS5A54xV9Ynyd+p/6bNXSiBfY5Dk1pkPyObzI0s10ceFr+3+FXsMq/qk+BM97TusU6bIvp+Flf1ufuy/OJBh817s/vlcKOaOHgRBOeyu0nppt4uIEA+gcboLLv96oIu18IFLhfSRooMh19hsvkKyNjkCo6R+fXC3ya/ddAdjrekxH2i8VmiH23oGTNYy+n2iBHyPhYjtWV8IJtyz38BW6a42JMKuJtn30IfgJT+PdkziayaP1W+OpX6J6HyJ+ac8MXaJEvNfnGGheVow34neAn/tag30aByRfI5PDBlZ9tzNghHuJDMnZpGO37rMam/L/Jj2w6wY/8TH1gPCNfQ3zxAJTZ3wPKkS9EIS9bm3OfbDonof9YWgw7gCJ0uqF+390/JIs1QZE+yhjkKOcifMKDdMX3kYbxKB3xn8fsNZEPPm2SBQ7KD/OkkgXZfYV/PV/U/+rok0IswDH+HDyCmAcuXs1LHP8gBzTyd487dIrgAPPfC489wK6K/GwjouYoo6nmZQXUHCtA9RThd+yX87fIn9X3T8Kkl2yC3zlS+NZK9XUClruFjU3093IcBFui8U79Zfg74Flj7dRHJJ/1Hq58xAs3JAdgNb9QDxHB9f8JfgSV+c96QaVnCcRhzx3+r+hXY9qtq1HmKy+up3Ft3T7BN06gWVDGZhI5JL4b6Mh9yolu5T6iukMN7M4KQqWZ/SKYP9+lYJyAOYtPveMy5IPdZja//XPVnkw+tBHdPe35w8kWs3UX+tjNrtggvpWvM3H8Lihi5f/dE1kVD068PL7O+Fc2z65eNseuDEfHKoxFpx4fjm9bS+LjFyEu4F8P4gras1geqq8QzK9wlJ3IWYJk3TtS8zbvV8MN2qGvaxQOXt3YafKe2NjN8U8A2hzGDQpdg37xqzurObB3dOY9uyYG8nG37pXjp9rg7wQm+v0A201GvGqUd4KfFlejgUobxCDjixAXod3NiWVfRaa6YsT0hitIWWAqXyr+JdhYBDJbSg32Y8fOFZvVDdziBq/cABPY8WEKpxf31fgnMM2xq681u9HYagAM/6mxDmM0eXaBNhCELgKt36Z+Vf9GYoDLrsg496TZ8yFg629dEL+D7sDq4FB8bIF7xTaxI2X8Q9dJWf7Y/ks2iPYGf2HsWf5HnOovUH2m4896Q9JDDs+rV7TduKs2+EcLNdnhvM/f+MqCEp8tO437h9C2YEP2nL7/5WR2G79sgYwGqo1ElJHu4F9msAkC84Lscxd4Bg5/ansGhVOAKf7MAuBu4NC8seJ1mQ0lku/okM090M/iS8HuAq/ivxJ/To1RMrDg/G8OTuVHub4e1j/wg9xBuF5fbPJVTlTsdOaPrmdiHVqK3UN/w+Xmz2r+K/mQf6G5RnauwDuHm80oGwCLkZMbHLYB/nkYm9Md/yF6NDa3SR9sNPM/0rD+cpgf8ws+qifOGN35XK2bHznBj3xWEKHTy+QT5HYiGJ83kW3lP5ZI4MTmKU1a9rcFbNyFT76OzVC+olP2tQYLEJNfGmO2iVs4AU/nd/PzejrHiM58z/BWvjnzs+J7QEvxzlcQgFupJxXfVuSjuFP11NFp4bI76IVnpZ/a7cxfRkNiIxtL9n41f1yayhrngmrG5LwYdWkp/x35h9Yg1WC6vlYNuStvKeZW+h9zfR/eIboHxD12Bml87PYgiCZZP5Z81fI5lrm5k0fxfWVj+x9lSgjp7YOOoAAAAABJRU5ErkJggg==\"});function kt(t){let e=new Image;return e.src=t,e.crossOrigin=\"anonymous\",new Promise((o,i)=>{e.onload=()=>{o(e)},e.onerror=()=>{i(`failed to load ${t}`)}})}function Dt(t){return t.startsWith(\"data:\")}function Pt(t,e,o={}){let i={lastLoaderID:0,loadRoot:\"\",loaders:{},sprites:{},sounds:{},fonts:{},shaders:{}};function m(T){var S;let w=i.lastLoaderID;i.loaders[w]=!1,i.lastLoaderID++,T.catch((S=o.errHandler)!=null?S:console.error).finally(()=>{i.loaders[w]=!0})}r(m,\"addLoader\");function v(){let T=0,w=0;for(let S in i.loaders)T+=1,i.loaders[S]&&(w+=1);return w/T}r(v,\"loadProgress\");function A(T){return T&&(i.loadRoot=T),i.loadRoot}r(A,\"loadRoot\");function R(T,w,S,U,B=mn){let _=new Promise((G,y)=>{let H=Dt(w)?w:i.loadRoot+w;kt(H).then(M=>{let q=t.makeFont(t.makeTex(M),S,U,B);i.fonts[T]=q,G(q)}).catch(y)});return m(_),_}r(R,\"loadFont\");function $(T,w,S={sliceX:1,sliceY:1,anims:{}}){function U(_,G,y={sliceX:1,sliceY:1,gridWidth:0,gridHeight:0,anims:{}}){let H=[],M=t.makeTex(G),q=y.sliceX||M.width/(y.gridWidth||M.width),J=y.sliceY||M.height/(y.gridHeight||M.height),E=1/q,O=1/J;for(let ne=0;ne<J;ne++)for(let ue=0;ue<q;ue++)H.push(oe(ue*E,ne*O,E,O));let te={tex:M,frames:H,anims:y.anims||{}};return i.sprites[_]=te,te}r(U,\"loadRawSprite\");let B=new Promise((_,G)=>{if(!w)return G(`expected sprite src for \"${T}\"`);if(typeof w==\"string\"){let y=Dt(w)?w:i.loadRoot+w;kt(y).then(H=>{_(U(T,H,S))}).catch(G)}else _(U(T,w,S))});return m(B),B}r($,\"loadSprite\");function k(T,w,S,U=!1){function B(G,y,H){let M=t.makeProgram(y,H);return i.shaders[G]=M,M}r(B,\"loadRawShader\");let _=new Promise((G,y)=>{if(!w&&!S)return y(\"no shader\");function H(M){return M?fetch(i.loadRoot+M).then(q=>{if(q.ok)return q.text();throw new Error(`failed to load ${M}`)}).catch(y):new Promise(q=>q(null))}if(r(H,\"resolveUrl\"),U)Promise.all([H(w),H(S)]).then(([M,q])=>{G(B(T,M,q))}).catch(y);else try{G(B(T,w,S))}catch(M){y(M)}});return m(_),_}r(k,\"loadShader\");function I(T,w){let S=i.loadRoot+w,U=new Promise((B,_)=>{if(!w)return _(`expected sound src for \"${T}\"`);typeof w==\"string\"&&fetch(S).then(G=>{if(G.ok)return G.arrayBuffer();throw new Error(`failed to load ${S}`)}).then(G=>new Promise((y,H)=>{e.ctx().decodeAudioData(G,y,H)})).then(G=>{i.sounds[T]=G,B(G)}).catch(_)});return m(U),U}r(I,\"loadSound\");function j(){return i.fonts[Se]}return r(j,\"defFont\"),R(Se,At,8,8),{loadRoot:A,loadSprite:$,loadSound:I,loadFont:R,loadShader:k,loadProgress:v,addLoader:m,defFont:j,sprites:i.sprites,fonts:i.fonts,sounds:i.sounds,shaders:i.shaders}}var mn,Se,It=fe(()=>{xe();_t();mn=\" !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\",Se=\"unscii\";r(kt,\"loadImg\");r(Dt,\"isDataUrl\");r(Pt,\"assetsInit\")});function Lt(t,e,o={max:8}){var k;let i=[],m=(k=o.max)!=null?k:8;function v(){i.length>m&&(i=i.slice(0,m));let I=f(0,t.height());i.forEach((j,T)=>{let w=ve(T,0,m,1,.5),S=ve(T,0,m,.8,.2),U=(()=>{switch(j.type){case\"info\":return Y(1,1,1,w);case\"error\":return Y(1,0,.5,w)}})(),B=t.fmtText(j.msg,e.defFont(),{pos:I,origin:\"botleft\",color:U,size:ln/t.scale(),width:t.width()});t.drawRect(I,B.width,B.height,{origin:\"botleft\",color:Y(0,0,0,S)}),t.drawFmtText(B),I.y-=B.height})}r(v,\"draw\");function A(I){console.error(I),i.unshift({type:\"error\",msg:I})}r(A,\"error\");function R(I){i.unshift({type:\"info\",msg:I})}r(R,\"info\");function $(){i=[]}return r($,\"clear\"),{info:R,error:A,draw:v,clear:$}}var ln,Ft=fe(()=>{xe();ln=16;r(Lt,\"loggerInit\")});function Gt(t){let e={},o=[],i=null;function m(){return i!==null&&i.readyState===1}r(m,\"connected\");function v(){let k=new WebSocket(t);return new Promise((I,j)=>{k.onopen=()=>{I(k),i=k;for(let T of o)k.send(T)},k.onerror=()=>{j(`failed to connect to ${t}`)},k.onmessage=T=>{let w=JSON.parse(T.data);if(e[w.type])for(let S of e[w.type])S(w.data,w.id)}})}r(v,\"connect\");function A(k,I){e[k]||(e[k]=[]),e[k].push(I)}r(A,\"recv\");function R(k,I){let j=JSON.stringify({type:k,data:I});i?i.send(j):o.push(j)}r(R,\"send\");function $(){i&&i.close()}return r($,\"close\"),{connect:v,close:$,connected:m,recv:A,send:R}}var Mt=fe(()=>{r(Gt,\"netInit\")});var pn=nn((Un,qt)=>{xe();gt();Rt();Ct();It();Ft();Mt();qt.exports=(t={width:640,height:480,scale:1,fullscreen:!1,debug:!1,crisp:!1,canvas:null,connect:null,logMax:8,root:document.body})=>{let e=vt({width:t.width,height:t.height,scale:t.scale,fullscreen:t.fullscreen,crisp:t.crisp,canvas:t.canvas,root:t.root}),o=xt(e.gl,{clearColor:t.clearColor?Y(t.clearColor):void 0,scale:t.scale,texFilter:t.texFilter}),i=Et(),m=Pt(o,i,{errHandler:s=>{v.error(s)}}),v=Lt(o,m,{max:t.logMax}),A=(()=>t.connect?Gt(t.connect):null)();function R(s,n){if(!A)throw new Error(\"not connected to any websockets\");A.recv(s,(a,d)=>{try{n(a,d)}catch(u){v.error(u)}})}r(R,\"recv\");function $(s,n){if(!A)throw new Error(\"not connected to any websockets\");A.send(s,n)}r($,\"send\");function k(){return e.dt()*W.timeScale}r(k,\"dt\");function I(s,n={}){let a=m.sounds[s];if(!a)throw new Error(`sound not found: \"${s}\"`);return i.play(a,n)}r(I,\"play\");function j(s){var a;let n=y();return!((a=n.layers[s!=null?s:n.defLayer])==null?void 0:a.noCam)}r(j,\"isCamLayer\");function T(s){return j(s)?y().cam.mpos:e.mousePos()}r(T,\"mousePos\");function w(s,n={}){var u;let a=(()=>typeof s==\"string\"?m.sprites[s]:s)();if(!a)throw new Error(`sprite not found: \"${s}\"`);let d=a.frames[(u=n.frame)!=null?u:0];o.drawTexture(a.tex,we(le({},n),{quad:d}))}r(w,\"drawSprite\");function S(s,n={}){var u;let a=(u=n.font)!=null?u:Se,d=m.fonts[a];if(!d)throw new Error(`font not found: ${a}`);o.drawText(s,d,n)}r(S,\"drawText\");let U=980,B=\"topleft\",_={loaded:!1,scenes:{},curScene:null,nextScene:null};function G(s,n){_.scenes[s]={init:n,initialized:!1,events:{add:[],update:[],draw:[],destroy:[],keyDown:[],keyPress:[],keyPressRep:[],keyRelease:[],mouseClick:[],mouseRelease:[],mouseDown:[],charInput:[]},action:[],render:[],objs:new Map,lastObjID:0,timers:{},lastTimerID:0,cam:{pos:f(o.width()/2,o.height()/2),scale:f(1,1),angle:0,shake:0,mpos:f(0),matrix:ee()},layers:{},defLayer:null,gravity:U,data:{}}}r(G,\"scene\");function y(){return _.scenes[_.curScene]}r(y,\"curScene\");function H(){return y().data}r(H,\"sceneData\");function M(){X(\"`\",()=>{W.showLog=!W.showLog,v.info(`show log: ${W.showLog?\"on\":\"off\"}`)}),X(\"f1\",()=>{W.inspect=!W.inspect,v.info(`inspect: ${W.inspect?\"on\":\"off\"}`)}),X(\"f2\",()=>{W.clearLog()}),X(\"f8\",()=>{W.paused=!W.paused,v.info(`${W.paused?\"paused\":\"unpaused\"}`)}),X(\"f7\",()=>{W.timeScale=ae(W.timeScale-.2,0,2),v.info(`time scale: ${W.timeScale.toFixed(1)}`)}),X(\"f9\",()=>{W.timeScale=ae(W.timeScale+.2,0,2),v.info(`time scale: ${W.timeScale.toFixed(1)}`)}),X(\"f10\",()=>{W.stepFrame(),v.info(\"stepped frame\")})}r(M,\"regDebugInputs\");function q(s,...n){_.nextScene={name:s,args:[...n]}}r(q,\"go\");function J(s,...n){E(s),_.curScene=s;let a=_.scenes[s];if(!a)throw new Error(`scene not found: '${s}'`);if(!a.initialized){try{a.init(...n)}catch(d){v.error(d.stack)}t.debug&&M(),a.initialized=!0}}r(J,\"goSync\");function E(s){if(!_.scenes[s])throw new Error(`scene not found: '${s}'`);G(s,_.scenes[s].init)}r(E,\"reload\");function O(s,n){let a=y();!a||(s.forEach((d,u)=>{a.layers[d]={alpha:1,order:u+1,noCam:!1}}),n&&(a.defLayer=n))}r(O,\"layers\");function te(...s){let n=y().cam;return s.length>0&&(n.pos=f(...s)),n.pos.clone()}r(te,\"camPos\");function ne(...s){let n=y().cam;return s.length>0&&(n.scale=f(...s)),n.scale.clone()}r(ne,\"camScale\");function ue(s){let n=y().cam;return s!==void 0&&(n.angle=s),n.angle}r(ue,\"camRot\");function ce(s){let n=y().cam;n.shake=s}r(ce,\"camShake\");function he(s){let n=y();s.forEach(a=>{n.layers[a]&&(n.layers[a].noCam=!0)})}r(he,\"camIgnore\");function pe(s){let n={hidden:!1,paused:!1,_tags:[],_id:null,_events:{add:[],update:[],draw:[],destroy:[],inspect:[]},use(u){if(u===void 0)return;let p=typeof u;if(p===\"string\"){this._tags.push(u);return}if(p!==\"object\")throw new Error(`invalid comp type: ${p}`);if(Array.isArray(u)){for(let c of u)this.use(c);return}for(let c in u){if(typeof u[c]==\"function\"){this._events[c]?this._events[c].push(u[c].bind(this)):this[c]=u[c].bind(this);continue}this[c]=u[c]}},exists(){return this._id!==void 0},is(u){if(u===\"*\")return!0;if(Array.isArray(u)){for(let p of u)if(!this._tags.includes(p))return!1;return!0}return this._tags.includes(u)},on(u,p){this._events[u]||(this._events[u]=[]),this._events[u].push(p)},action(u){this.on(\"update\",u)},trigger(u,...p){if(this._events[u])for(let g of this._events[u])g.call(this,...p);let l=y().events[u];if(l)for(let g of l)this.is(g.tag)&&g.cb(this,...p)},rmTag(u){let p=this._tags.indexOf(u);p>-1&&this._tags.splice(p,1)}};n.use(s);let a=y(),d=a.lastObjID++;a.objs.set(d,n),n._id=d,n.trigger(\"add\");for(let u of a.events.add)n.is(u.tag)&&u.cb(n);return n}r(pe,\"add\");function be(s){if(!s.exists())return;let n=y();n.objs.delete(s._id);let a=n.lastObjID++;return n.objs.set(a,s),s._id=a,s}r(be,\"readd\");function Ee(s,n,a){let d=y();d.events[s]||(d.events[s]=[]),d.events[s].push({tag:n,cb:a})}r(Ee,\"on\");function h(s,n){typeof s==\"function\"&&n===void 0?y().action.push(s):typeof s==\"string\"&&Ee(\"update\",s,n)}r(h,\"action\");function x(s,n){typeof s==\"function\"&&n===void 0?y().render.push(s):typeof s==\"string\"&&Ee(\"update\",s,n)}r(x,\"render\");function b(s,n,a){h(s,d=>{d._checkCollisions(n,u=>{a(d,u)})})}r(b,\"collides\");function L(s,n,a){h(s,d=>{d._checkOverlaps(n,u=>{a(d,u)})})}r(L,\"overlaps\");function z(s,n){h(s,a=>{a.isClicked()&&n(a)})}r(z,\"clicks\");function V(s,n){return new Promise(a=>{let d=y();d.timers[d.lastTimerID++]={time:s,cb:()=>{n&&n(),a()}}})}r(V,\"wait\");function K(s,n){let a=!1,d=r(()=>{a||(n(),V(s,d))},\"newF\");return d(),{stop(){a=!0}}}r(K,\"loop\");function C(s,n,a){if(Array.isArray(n))for(let d of n)C(s,d,a);else y().events[s].push({key:n,cb:a})}r(C,\"pushKeyEvent\");function P(s,n){C(\"keyDown\",s,n)}r(P,\"keyDown\");function X(s,n){C(\"keyPress\",s,n)}r(X,\"keyPress\");function F(s,n){C(\"keyPressRep\",s,n)}r(F,\"keyPressRep\");function Z(s,n){C(\"keyRelease\",s,n)}r(Z,\"keyRelease\");function re(s){y().events.charInput.push({cb:s})}r(re,\"charInput\");function ge(s){y().events.mouseDown.push({cb:s})}r(ge,\"mouseDown\");function Fe(s){y().events.mouseClick.push({cb:s})}r(Fe,\"mouseClick\");function Ge(s){y().events.mouseRelease.push({cb:s})}r(Ge,\"mouseRelease\");function se(s){let n=y(),a=[...n.objs.values()].sort((d,u)=>{var l,g,D,N,Q,de;let p=(D=(g=n.layers[(l=d.layer)!=null?l:n.defLayer])==null?void 0:g.order)!=null?D:0,c=(de=(Q=n.layers[(N=u.layer)!=null?N:n.defLayer])==null?void 0:Q.order)!=null?de:0;return p-c});return s?a.filter(d=>d.is(s)):a}r(se,\"get\");function me(s,n){typeof s==\"function\"&&n===void 0?se().forEach(s):typeof s==\"string\"&&se(s).forEach(n)}r(me,\"every\");function Ce(s,n){typeof s==\"function\"&&n===void 0?se().reverse().forEach(s):typeof s==\"string\"&&se(s).reverse().forEach(n)}r(Ce,\"revery\");function ie(s){if(!s.exists())return;let n=y();!n||(s.trigger(\"destroy\"),n.objs.delete(s._id),delete s._id)}r(ie,\"destroy\");function Ue(s){me(s,n=>{ie(n)})}r(Ue,\"destroyAll\");function Me(s){let n=y();return s!==void 0&&(n.gravity=s),n.gravity}r(Me,\"gravity\");function Ae(s){let n=y();if(!n)throw new Error(`scene not found: '${_.curScene}'`);let a=s||!W.paused;if(a)for(let c in n.timers){let l=n.timers[c];l.time-=k(),l.time<=0&&(l.cb(),delete n.timers[c])}if(Ce(c=>{!c.paused&&a&&c.trigger(\"update\")}),a)for(let c of n.action)c();let d=f(o.width(),o.height()),u=n.cam,p=ot(Pe(0,Math.PI*2)).scale(u.shake);u.shake=De(u.shake,0,5*k()),u.matrix=ee().translate(d.scale(.5)).scale(u.scale).rotateZ(u.angle).translate(d.scale(-.5)).translate(u.pos.scale(-1).add(d.scale(.5)).add(p)),u.mpos=u.matrix.invert().multVec2(e.mousePos()),me(c=>{c.hidden||(o.pushTransform(),j(c.layer)&&o.pushMatrix(u.matrix),c.trigger(\"draw\"),o.popTransform())});for(let c of n.render)c()}r(Ae,\"gameFrame\");function Be(){let s=y();for(let n of s.events.charInput)e.charInputted().forEach(n.cb);for(let n of s.events.keyDown)e.keyDown(n.key)&&n.cb();for(let n of s.events.keyPress)e.keyPressed(n.key)&&n.cb();for(let n of s.events.keyPressRep)e.keyPressedRep(n.key)&&n.cb();for(let n of s.events.keyRelease)e.keyReleased(n.key)&&n.cb();for(let n of s.events.mouseDown)e.mouseDown()&&n.cb();for(let n of s.events.mouseClick)e.mouseClicked()&&n.cb();for(let n of s.events.mouseRelease)e.mouseReleased()&&n.cb()}r(Be,\"handleEvents\");function _e(){var c;let s=y(),n=null,a=m.defFont(),d=Y((c=t.inspectColor)!=null?c:[0,1,1,1]);function u(l,g,D){let N=f(4).scale(1/D),Q=o.fmtText(g,a,{size:12/D,pos:l.add(f(N.x,N.y))});o.drawRect(l,Q.width+N.x*2,Q.height+N.x*2,{color:Y(0,0,0,1)}),o.drawFmtText(Q)}r(u,\"drawInspectTxt\");function p(l,g){let D=j(l.layer),N=o.scale()*(D?(s.cam.scale.x+s.cam.scale.y)/2:1);D&&(o.pushTransform(),o.pushMatrix(s.cam.matrix)),g(N),D&&o.popTransform()}r(p,\"drawObj\"),Ce(l=>{!l.area||l.hidden||p(l,g=>{n||l.isHovered()&&(n=l);let D=(n===l?6:2)/g,N=l._worldArea(),Q=N.p2.x-N.p1.x,de=N.p2.y-N.p1.y;o.drawRectStroke(N.p1,Q,de,{width:D,color:d})})}),n&&p(n,l=>{let g=T(n.layer),D=[];for(let N of n._tags)D.push(`\"${N}\"`);for(let N of n._events.inspect){let Q=N();for(let de in Q)D.push(`${de}: ${Q[de]}`)}u(g,D.join(`\n`),l)}),u(f(0),e.fps()+\"\",o.scale())}r(_e,\"drawInspect\");function je(s,...n){e.run(()=>{if(o.frameStart(),_.loaded){try{if(!y())throw new Error(`scene not found: '${_.curScene}'`);Be(),Ae(),W.inspect&&_e()}catch(a){v.error(a.stack),e.quit()}W.showLog&&v.draw(),_.nextScene&&(J.apply(null,[_.nextScene.name,..._.nextScene.args]),_.nextScene=null)}else{let a=m.loadProgress();if(a===1)_.loaded=!0,J(s,...n),A&&A.connect().catch(v.error);else{let d=o.width()/2,u=24/o.scale(),p=f(o.width()/2,o.height()/2).sub(f(d/2,u/2));o.drawRect(f(0),o.width(),o.height(),{color:Ve(0,0,0)}),o.drawRectStroke(p,d,u,{width:4/o.scale()}),o.drawRect(p,d*a,u)}}o.frameEnd()})}r(je,\"start\");function qe(...s){return{pos:f(...s),move(...n){let a=f(...n),d=a.x*k(),u=a.y*k();this.pos.x+=d,this.pos.y+=u},inspect(){return{pos:`(${~~this.pos.x}, ${~~this.pos.y})`}}}}r(qe,\"pos\");function Ze(...s){return s.length===0?Ze(1):{scale:f(...s),flipX(n){this.scale.x=Math.sign(n)*Math.abs(this.scale.x)},flipY(n){this.scale.y=Math.sign(n)*Math.abs(this.scale.y)}}}r(Ze,\"scale\");function Ot(s){return{angle:s!=null?s:0}}r(Ot,\"rotate\");function Vt(...s){return{color:Y(...s)}}r(Vt,\"color\");function Nt(s){return{origin:s}}r(Nt,\"origin\");function Ut(s){return{layer:s,inspect(){var a;let n=y();return{layer:(a=this.layer)!=null?a:n.defLayer}}}}r(Ut,\"layer\");function ze(s,n){var d,u;let a=y();return((d=s.layer)!=null?d:a.defLayer)===((u=n.layer)!=null?u:a.defLayer)}r(ze,\"isSameLayer\");function Qe(s,n){let a={},d={};return{area:{p1:s,p2:n},areaWidth(){let{p1:u,p2:p}=this._worldArea();return p.x-u.x},areaHeight(){let{p1:u,p2:p}=this._worldArea();return p.y-u.y},isClicked(){return e.mouseClicked()&&this.isHovered()},isHovered(){return this.hasPt(T(this.layer))},isCollided(u){if(!u.area||!ze(this,u))return!1;let p=this._worldArea(),c=u._worldArea();return Ye(p,c)},isOverlapped(u){if(!u.area||!ze(this,u))return!1;let p=this._worldArea(),c=u._worldArea();return lt(p,c)},clicks(u){this.action(()=>{this.isClicked()&&u()})},hovers(u){this.action(()=>{this.isHovered()&&u()})},collides(u,p){this.action(()=>{this._checkCollisions(u,p)})},overlaps(u,p){this.action(()=>{this._checkOverlaps(u,p)})},hasPt(u){let p=this._worldArea();return pt({p1:p.p1,p2:p.p2},u)},resolve(){let u=[];return me(p=>{if(p===this||!p.solid||!p.area||!ze(this,p))return;let c=this._worldArea(),l=p._worldArea();if(!Ye(c,l))return;let g=c.p2.x-l.p1.x,D=l.p2.x-c.p1.x,N=c.p2.y-l.p1.y,Q=l.p2.y-c.p1.y,de=Math.min(g,D,N,Q),Zt=(()=>{switch(de){case g:return this.pos.x-=g,\"right\";case D:return this.pos.x+=D,\"left\";case N:return this.pos.y-=N,\"bottom\";case Q:return this.pos.y+=Q,\"top\"}})();u.push({obj:p,side:Zt})}),u},_checkCollisions(u,p){me(u,c=>{this!==c&&(a[c._id]||this.isCollided(c)&&(p(c),a[c._id]=c))});for(let c in a){let l=a[c];this.isCollided(l)||delete a[c]}},_checkOverlaps(u,p){me(u,c=>{this!==c&&(d[c._id]||this.isOverlapped(c)&&(p(c),d[c._id]=c))});for(let c in d){let l=d[c];this.isOverlapped(l)||delete d[c]}},_worldArea(){let u=this.area,p=this.pos||f(0),c=this.scale||f(1),l=p.add(u.p1.dot(c)),g=p.add(u.p2.dot(c));return{p1:f(Math.min(l.x,g.x),Math.min(l.y,g.y)),p2:f(Math.max(l.x,g.x),Math.max(l.y,g.y))}}}}r(Qe,\"area\");function Oe(s,n,a){let d=f(s,n),u=Le(a||B).dot(d).scale(-.5);return Qe(u.sub(d.scale(.5)),u.add(d.scale(.5)))}r(Oe,\"getAreaFromSize\");function Bt(s,n={}){let a=m.sprites[s];if(!a)throw new Error(`sprite not found: \"${s}\"`);let d=le({},a.frames[0]);n.quad&&(d.x+=n.quad.x*d.w,d.y+=n.quad.y*d.h,d.w*=n.quad.w,d.h*=n.quad.h);let u=a.tex.width*d.w,p=a.tex.height*d.h,c=null;return{width:u,height:p,animSpeed:n.animSpeed||.1,frame:n.frame||0,quad:n.quad||oe(0,0,1,1),add(){!this.area&&!n.noArea&&this.use(Oe(this.width,this.height,this.origin))},draw(){let l=y(),g=a.frames[this.frame];w(a,{pos:this.pos,scale:this.scale,rot:this.angle,color:this.color,frame:this.frame,origin:this.origin,quad:this.quad,prog:m.shaders[this.shader],uniform:this.uniform})},update(){if(!c)return;let l=a.anims[c.name];c.timer+=k(),c.timer>=this.animSpeed&&(this.frame++,this.frame>l.to&&(c.loop?this.frame=l.from:(this.frame--,this.stop())),c&&(c.timer-=this.animSpeed))},play(l,g=!0){let D=a.anims[l];if(!D)throw new Error(`anim not found: ${l}`);c&&this.stop(),c={name:l,loop:g,timer:0},this.frame=D.from,this.trigger(\"animPlay\",l)},stop(){if(!c)return;let l=c.name;c=null,this.trigger(\"animEnd\",l)},changeSprite(l){if(a=m.sprites[l],!a)throw new Error(`sprite not found: \"${l}\"`);let g=le({},a.frames[0]);n.quad&&(g.x+=n.quad.x*g.w,g.y+=n.quad.y*g.h,g.w*=n.quad.w,g.h*=n.quad.h),this.width=a.tex.width*g.w,this.height=a.tex.height*g.h,this.area&&!n.noArea&&this.use(Oe(this.width,this.height,this.origin)),c=null,this.frame=0},numFrames(){return a.frames.length},curAnim(){return c==null?void 0:c.name},inspect(){let l={};return c&&(l.curAnim=`\"${c.name}\"`),l}}}r(Bt,\"sprite\");function jt(s,n,a={}){return{text:s,textSize:n,font:a.font,width:0,height:0,add(){var d,u,p;if(!this.area&&!a.noArea){let c=y(),l=m.fonts[(d=this.font)!=null?d:Se],g=o.fmtText(this.text+\"\",l,{pos:this.pos,scale:this.scale,rot:this.angle,size:this.textSize,origin:this.origin,color:this.color,width:a.width});this.width=g.width/(((u=this.scale)==null?void 0:u.x)||1),this.height=g.height/(((p=this.scale)==null?void 0:p.y)||1),this.use(Oe(this.width,this.height,this.origin))}},draw(){var c;let d=y(),u=m.fonts[(c=this.font)!=null?c:Se],p=o.fmtText(this.text+\"\",u,{pos:this.pos,scale:this.scale,rot:this.angle,size:this.textSize,origin:this.origin,color:this.color,width:a.width});this.width=p.width,this.height=p.height,o.drawFmtText(p)}}}r(jt,\"text\");function zt(s,n,a={}){return{width:s,height:n,add(){!this.area&&!a.noArea&&this.use(Oe(this.width,this.height,this.origin))},draw(){let d=y();o.drawRect(this.pos,this.width,this.height,{scale:this.scale,rot:this.angle,color:this.color,origin:this.origin,prog:m.shaders[this.shader],uniform:this.uniform})}}}r(zt,\"rect\");function Xt(){return{solid:!0}}r(Xt,\"solid\");let Yt=960,$t=480;function Ht(s={}){var p,c;let n=0,a=null,d=null,u=(p=s.maxVel)!=null?p:Yt;return{jumpForce:(c=s.jumpForce)!=null?c:$t,update(){this.move(0,n);let l=this.resolve(),g=!1;if(a&&(!a.exists()||!this.isCollided(a)?(a=null,d=null,g=!0):d&&(this.pos=this.pos.add(a.pos.sub(d)),d=a.pos.clone())),!a){n=Math.min(n+Me()*k(),u);for(let D of l)D.side===\"bottom\"&&n>0?(a=D.obj,n=0,d=a.pos.clone(),g||this.trigger(\"grounded\",a)):D.side===\"top\"&&n<0&&(n=0,this.trigger(\"headbump\",D.obj))}},curPlatform(){return a},grounded(){return a!==null},falling(){return n>0},jump(l){a=null,n=-l||-this.jumpForce}}}r(Ht,\"body\");function Wt(s,n={}){let a=m.shaders[s];return{shader:s,uniform:n}}r(Wt,\"shader\");let W={paused:!1,inspect:!1,timeScale:1,showLog:!0,fps:e.fps,objCount(){return y().objs.size},stepFrame(){Ae(!0)},drawCalls:o.drawCalls,clearLog:v.clear,log:v.info,error:v.error};function Kt(s,n){let a=[],d=f(n.pos||0),u=0,p={getPos(...c){let l=f(...c);return f(d.x+l.x*n.width,d.y+l.y*n.height)},spawn(c,l){let g=(()=>{if(Array.isArray(c))return c;if(n[c]){if(typeof n[c]==\"function\")return n[c]();if(Array.isArray(n[c]))return[...n[c]]}else if(n.any)return n.any(c)})();if(!g)return;g.push(qe(d.x+l.x*n.width,d.y+l.y*n.height));let D=pe(g);return a.push(D),D.use({gridPos:l.clone(),setGridPos(N){this.gridPos=N.clone(),this.pos=f(d.x+this.gridPos.x*n.width,d.y+this.gridPos.y*n.height)},moveLeft(){this.setGridPos(this.gridPos.add(f(-1,0)))},moveRight(){this.setGridPos(this.gridPos.add(f(1,0)))},moveUp(){this.setGridPos(this.gridPos.add(f(0,-1)))},moveDown(){this.setGridPos(this.gridPos.add(f(0,1)))}}),D},width(){return u*n.width},height(){return s.length*n.height},destroy(){for(let c of a)ie(c)}};return s.forEach((c,l)=>{let g=c.split(\"\");u=Math.max(g.length,u),g.forEach((D,N)=>{p.spawn(D,f(N,l))})}),p}r(Kt,\"addLevel\");let ke={start:je,loadRoot:m.loadRoot,loadSprite:m.loadSprite,loadSound:m.loadSound,loadFont:m.loadFont,loadShader:m.loadShader,addLoader:m.addLoader,width:o.width,height:o.height,dt:k,time:e.time,screenshot:e.screenshot,scene:G,go:q,sceneData:H,layers:O,camPos:te,camScale:ne,camRot:ue,camShake:ce,camIgnore:he,gravity:Me,add:pe,readd:be,destroy:ie,destroyAll:Ue,get:se,every:me,revery:Ce,send:$,recv:R,pos:qe,scale:Ze,rotate:Ot,color:Vt,origin:Nt,layer:Ut,area:Qe,sprite:Bt,text:jt,rect:zt,solid:Xt,body:Ht,shader:Wt,on:Ee,action:h,render:x,collides:b,overlaps:L,clicks:z,keyDown:P,keyPress:X,keyPressRep:F,keyRelease:Z,charInput:re,mouseDown:ge,mouseClick:Fe,mouseRelease:Ge,mousePos:T,cursor:e.cursor,keyIsDown:e.keyDown,keyIsPressed:e.keyPressed,keyIsPressedRep:e.keyPressedRep,keyIsReleased:e.keyReleased,mouseIsDown:e.mouseDown,mouseIsClicked:e.mouseClicked,mouseIsReleased:e.mouseReleased,loop:K,wait:V,play:I,volume:i.volume,makeRng:Xe,rand:Pe,randSeed:ft,vec2:f,rgb:Ve,rgba:Y,quad:oe,choose:mt,chance:ht,lerp:De,map:ve,mapc:st,wave:ut,deg2rad:nt,rad2deg:rt,drawSprite:w,drawText:S,drawRect:o.drawRect,drawRectStroke:o.drawRectStroke,drawLine:o.drawLine,debug:W,addLevel:Kt};if(t.plugins)for(let s of t.plugins){let n=s(ke);for(let a in n)ke[a]=n[a]}if(t.global)for(let s in ke)window[s]=ke[s];return ke}});/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (pn());\n//# sourceMappingURL=kaboom.mjs.map\n\n\n//# sourceURL=webpack:///./node_modules/kaboom/dist/kaboom.mjs?");

/***/ }),

/***/ "./src/ambient/bird.js":
/*!*****************************!*\
  !*** ./src/ambient/bird.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"birdConfig\": () => (/* binding */ birdConfig)\n/* harmony export */ });\n/* harmony import */ var _components_distance__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/distance */ \"./src/components/distance.js\");\n/* harmony import */ var _components_stateMachine__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/stateMachine */ \"./src/components/stateMachine.js\");\n/* harmony import */ var _components_viewDirection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/viewDirection */ \"./src/components/viewDirection.js\");\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../kaboom */ \"./src/kaboom.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../player */ \"./src/player.js\");\n\r\n\r\n\r\n\r\n\r\n\r\nconst stateActions = {\r\n  /**\r\n   * IDLE\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_1__.states.IDLE]: {\r\n    updateAction: (bird) => {\r\n      const player = (0,_player__WEBPACK_IMPORTED_MODULE_4__.getPlayer)();\r\n      if (bird.shouldEscape(player)) {\r\n        bird.escape(player);\r\n      }\r\n    },\r\n    resolve: (bird) => {\r\n      bird.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_1__.states.MOVE, bird, Math.floor(Math.random() * 5));\r\n      bird.play(\"idle\");\r\n    },\r\n  },\r\n  /**\r\n   * MOVE\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_1__.states.MOVE]: {\r\n    updateAction: (bird) => {\r\n      const player = (0,_player__WEBPACK_IMPORTED_MODULE_4__.getPlayer)();\r\n      if (bird.shouldEscape(player)) {\r\n        bird.escape(player);\r\n      }\r\n      bird.move(bird.getViewDirection() * 10, 0);\r\n    },\r\n    resolve: (bird) => {\r\n      // Let the bird turn at random\r\n      if (Math.random() > 0.5) {\r\n        bird.setViewDirection(bird.getViewDirection() * -1);\r\n        bird.scale.x *= -1;\r\n      }\r\n      bird.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_1__.states.IDLE, bird, 3);\r\n      bird.play(\"walk\");\r\n    },\r\n  },\r\n  /**\r\n   * FLY\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_1__.states.FLY]: {\r\n    updateAction: (bird) => {\r\n      const player = (0,_player__WEBPACK_IMPORTED_MODULE_4__.getPlayer)();\r\n      bird.escapingTimer += _kaboom__WEBPACK_IMPORTED_MODULE_3__.default.dt();\r\n\r\n      bird.move(bird.getViewDirection() * 50, 0);\r\n      bird.jump(20);\r\n      // Change the view direction only if the player is near enough\r\n      if (bird.playerIsNearby()) {\r\n        if (bird.getViewDirection() === 1 && bird.pos.x < player.pos.x) {\r\n          bird.setViewDirection(-1);\r\n          bird.scale.x = 1;\r\n        }\r\n        if (bird.getViewDirection() === -1 && bird.pos.x > player.pos.x) {\r\n          bird.setViewDirection(1);\r\n          bird.scale.x = -1;\r\n        }\r\n      }\r\n\r\n      if (bird.escapingTimer > 3 && bird.canStopEscaping()) {\r\n        bird.escaping = false;\r\n        bird.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_1__.states.IDLE, bird);\r\n      }\r\n    },\r\n    resolve: (bird) => {\r\n      bird.escapingTimer = 0;\r\n      bird.play(\"fly\");\r\n    },\r\n  },\r\n};\r\n\r\nconst onBirdAdded = () => {\r\n  // If the goblin collides with the player\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_3__.default.collides(\"bird\", \"enemy\", (bird, enemy) => {\r\n    if (!bird.escaping) {\r\n      if (bird.viewDirection === -1 && bird.pos.x < enemy.pos.x) {\r\n        bird.viewDirection = 1;\r\n        bird.scale.x = -1;\r\n      }\r\n      if (bird.viewDirection === 1 && bird.pos.x > enemy.pos.x) {\r\n        bird.viewDirection = -1;\r\n        bird.scale.x = 1;\r\n      }\r\n      bird.escape(enemy);\r\n    }\r\n  });\r\n};\r\n\r\nconst spawnBird = (pos) => {\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_3__.default.add([\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_3__.default.sprite(\"bird\", {\r\n      frame: 0,\r\n    }),\r\n    \"bird\",\r\n    \"ambient\",\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_3__.default.scale(1),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_3__.default.body(),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_3__.default.origin(\"center\"),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_3__.default.pos(pos),\r\n    (0,_components_stateMachine__WEBPACK_IMPORTED_MODULE_1__.default)(_components_stateMachine__WEBPACK_IMPORTED_MODULE_1__.states.IDLE, stateActions),\r\n    (0,_components_distance__WEBPACK_IMPORTED_MODULE_0__.default)(),\r\n    (0,_components_viewDirection__WEBPACK_IMPORTED_MODULE_2__.default)(),\r\n    {\r\n      escaping: false,\r\n      escapingTimer: 0,\r\n      add() {\r\n        onBirdAdded();\r\n      },\r\n      /**\r\n       * Checks if the bird should escape.\r\n       * @returns True if it should escape\r\n       */\r\n      shouldEscape(gameobject) {\r\n        return this.distanceToGameobject(gameobject) < 20;\r\n      },\r\n      /**\r\n       * Checks if the player is nearby.\r\n       * @returns true if the player is nearby\r\n       */\r\n      playerIsNearby() {\r\n        const player = (0,_player__WEBPACK_IMPORTED_MODULE_4__.getPlayer)();\r\n        return this.distanceToGameobject(player) < 20;\r\n      },\r\n      /**\r\n       * Let's the bird escape. Directly away from the player.\r\n       */\r\n      escape(from) {\r\n        this.escaping = true;\r\n        // Player is on the left, escape to the right\r\n        if (this.gameobjectPos(from) === -1) {\r\n          this.viewDirection = 1;\r\n          this.scale.x = -1;\r\n        } else {\r\n          this.viewDirection = -1;\r\n          this.scale.x = 1;\r\n        }\r\n\r\n        this.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_1__.states.FLY, this);\r\n      },\r\n      /**\r\n       * Checks if the bird is far enough from the player.\r\n       * @returns True if the player is far enough.\r\n       */\r\n      canStopEscaping() {\r\n        const player = (0,_player__WEBPACK_IMPORTED_MODULE_4__.getPlayer)();\r\n        return this.distanceToGameobject(player) > 100;\r\n      },\r\n    },\r\n  ]);\r\n};\r\n\r\nconst birdConfig = () => {\r\n  return [\r\n    {\r\n      add() {\r\n        spawnBird(this.pos);\r\n        _kaboom__WEBPACK_IMPORTED_MODULE_3__.default.destroy(this);\r\n      },\r\n    },\r\n  ];\r\n};\r\n\n\n//# sourceURL=webpack:///./src/ambient/bird.js?");

/***/ }),

/***/ "./src/camera.js":
/*!***********************!*\
  !*** ./src/camera.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./kaboom */ \"./src/kaboom.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./player */ \"./src/player.js\");\n\r\n\r\n\r\nconst initCamera = () => {\r\n  const player = (0,_player__WEBPACK_IMPORTED_MODULE_1__.getPlayer)();\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.camIgnore([\"bg\", \"ui\"]);\r\n\r\n  // Let the camera follow the player.\r\n  player.action(() => {\r\n    // Fix the camera on the bottom level line\r\n    const position = { ...player.pos, y: 240 };\r\n\r\n    const minX = Math.floor(_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.width() / 2);\r\n    if (position.x < minX) {\r\n      position.x = minX;\r\n    }\r\n\r\n    if (160 - player.pos.y > -30) {\r\n      position.y = 240 - (160 - player.pos.y) - 30;\r\n    }\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.camPos(position);\r\n  });\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (initCamera);\r\n\n\n//# sourceURL=webpack:///./src/camera.js?");

/***/ }),

/***/ "./src/components/attack.js":
/*!**********************************!*\
  !*** ./src/components/attack.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../kaboom */ \"./src/kaboom.js\");\n/* harmony import */ var _components_viewDirection__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/viewDirection */ \"./src/components/viewDirection.js\");\n\r\n\r\n\r\n\r\nconst attack = () => {\r\n  let timeSinceLastAttack = _constants__WEBPACK_IMPORTED_MODULE_0__.default.ATTACK_DELAY;\r\n  // Runs every frame\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.action(() => {\r\n    timeSinceLastAttack += _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.dt();\r\n  });\r\n\r\n  /**\r\n   * Check if the game object can attack.\r\n   *\r\n   * @returns\r\n   */\r\n  function canAttack() {\r\n    return timeSinceLastAttack >= _constants__WEBPACK_IMPORTED_MODULE_0__.default.ATTACK_DELAY;\r\n  }\r\n\r\n  const spawnAttack = (gameobject) => {\r\n    const gameObjectViewDirection = gameobject.getViewDirection();\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.add([\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.sprite(\"sword_effect\"),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.pos({\r\n        y: gameobject.pos.y - 2,\r\n        x: gameobject.pos.x + 16 * gameObjectViewDirection,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.origin(\"center\"),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.scale(1),\r\n      (0,_components_viewDirection__WEBPACK_IMPORTED_MODULE_2__.default)(gameObjectViewDirection),\r\n      \"attack\",\r\n      {\r\n        /**\r\n         * Place hit effect at the sword attacks position.\r\n         */\r\n        hit() {\r\n          const swordAttack = this;\r\n          _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.add([\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.sprite(\"hit_sparkle\"),\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.pos(swordAttack.pos),\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.origin(\"center\"),\r\n            {\r\n              add() {\r\n                this.play(\"effect\", false);\r\n                this.on(\"animEnd\", (anim) => {\r\n                  if (anim === \"effect\") {\r\n                    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(this);\r\n                  }\r\n                });\r\n              },\r\n            },\r\n          ]);\r\n          _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.wait(0.1, function () {\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(swordAttack);\r\n          });\r\n        },\r\n        add() {\r\n          this.scale.x = gameObjectViewDirection;\r\n          this.play(\"effect\", false);\r\n          this.on(\"animEnd\", (anim) => {\r\n            if (anim === \"effect\") {\r\n              _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(this);\r\n            }\r\n          });\r\n\r\n          _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.collides(\"attack\", \"enemy\", (attack, enemy) => {\r\n            attack.hit();\r\n            enemy.suffer(1);\r\n            enemy.bounce(this.getViewDirection());\r\n          });\r\n\r\n          _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.collides(\"attack\", \"block\", (attack, block) => {\r\n            attack.hit();\r\n          });\r\n\r\n          _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.collides(\"attack\", \"bird\", (attack, block) => {\r\n            attack.hit();\r\n          });\r\n        },\r\n      },\r\n    ]);\r\n  };\r\n\r\n  return {\r\n    canAttack,\r\n    attack() {\r\n      timeSinceLastAttack = 0;\r\n      spawnAttack(this);\r\n    },\r\n  };\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (attack);\r\n\n\n//# sourceURL=webpack:///./src/components/attack.js?");

/***/ }),

/***/ "./src/components/bounce.js":
/*!**********************************!*\
  !*** ./src/components/bounce.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../kaboom */ \"./src/kaboom.js\");\n\r\n\r\nconst bouncable = () => {\r\n  let isBouncing = false;\r\n  const bounceIntensity = 50;\r\n  let bounceDirection = 1;\r\n\r\n  /**\r\n   * Bounce the gameobject into the given direction.\r\n   *\r\n   * @param {*} direction\r\n   */\r\n  function bounce(direction) {\r\n    bounceDirection = direction;\r\n    isBouncing = true;\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.wait(0.5, () => {\r\n      isBouncing = false;\r\n    });\r\n  }\r\n\r\n  return {\r\n    bounce,\r\n    isBouncing: () => isBouncing,\r\n    update() {\r\n      if (isBouncing) {\r\n        this.move(bounceDirection * bounceIntensity);\r\n      }\r\n    },\r\n  };\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (bouncable);\r\n\n\n//# sourceURL=webpack:///./src/components/bounce.js?");

/***/ }),

/***/ "./src/components/control.js":
/*!***********************************!*\
  !*** ./src/components/control.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../kaboom */ \"./src/kaboom.js\");\n/* harmony import */ var _stateMachine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./stateMachine */ \"./src/components/stateMachine.js\");\n\r\n\r\n\r\n\r\nconst control = () => {\r\n  return {\r\n    add() {\r\n      const player = this;\r\n      // Jump\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.keyPress(\"space\", () => {\r\n        if (!player.canInteract()) {\r\n          return;\r\n        }\r\n        player.changeState(_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.JUMP, player);\r\n      });\r\n\r\n      // Move left\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.keyDown(\"left\", () => {\r\n        if (!player.canInteract()) {\r\n          return;\r\n        }\r\n        player.run(-1);\r\n      });\r\n\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.keyPress(\"left\", () => {\r\n        player.changeState(_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.MOVE, player);\r\n      });\r\n\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.keyRelease(\"left\", () => {\r\n        if (!player.canInteract()) {\r\n          return;\r\n        }\r\n        if (player.grounded()) {\r\n          player.changeState(_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.IDLE, player);\r\n        }\r\n      });\r\n\r\n      // Move right\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.keyDown(\"right\", () => {\r\n        if (!player.canInteract()) {\r\n          return;\r\n        }\r\n        player.run(1);\r\n      });\r\n\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.keyPress(\"right\", () => {\r\n        player.changeState(_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.MOVE, player);\r\n      });\r\n\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.keyRelease(\"right\", () => {\r\n        if (!player.canInteract()) {\r\n          return;\r\n        }\r\n        if (player.grounded()) {\r\n          player.changeState(_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.IDLE, player);\r\n        }\r\n      });\r\n\r\n      // Shoot\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.keyPress(\"f\", () => {\r\n        if (!player.canInteract()) {\r\n          return;\r\n        }\r\n        player.changeState(_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.SHOOT, player);\r\n      });\r\n\r\n      // Melee\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.keyPress(\"d\", () => {\r\n        if (!player.canInteract()) {\r\n          return;\r\n        }\r\n        player.changeState(_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.ATTACK, player);\r\n      });\r\n    },\r\n  };\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (control);\r\n\n\n//# sourceURL=webpack:///./src/components/control.js?");

/***/ }),

/***/ "./src/components/distance.js":
/*!************************************!*\
  !*** ./src/components/distance.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../player */ \"./src/player.js\");\n\r\n\r\nconst distance = () => {\r\n  /**\r\n   * Calculate the distance to the given gameobject.\r\n   *\r\n   * @param {*} axis\r\n   * @returns The distance from the current game object to the given gameobject (always positive)\r\n   */\r\n  function distanceToGameobject(gameobject, axis = \"x\") {\r\n    const dist = this.pos[axis] - gameobject.pos[axis];\r\n\r\n    return dist < 0 ? dist * -1 : dist;\r\n  }\r\n\r\n  /**\r\n   * Determines where the gameobject is.\r\n   *\r\n   * x = -1: gameobject is on the left\r\n   * x = 1: gameobject is on the right\r\n   * y = -1: gameobject is above\r\n   * y = 1: gameobject is beneath\r\n   * @param gameobject\r\n   * @param {*} axis\r\n   * @returns The position of the given gameobject relative to the current game object.\r\n   */\r\n  function gameobjectPos(gameobject, axis = \"x\") {\r\n    if (this.pos[axis] < gameobject.pos[axis]) {\r\n      return 1;\r\n    }\r\n\r\n    return -1;\r\n  }\r\n\r\n  return {\r\n    distanceToGameobject,\r\n    gameobjectPos,\r\n  };\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (distance);\r\n\n\n//# sourceURL=webpack:///./src/components/distance.js?");

/***/ }),

/***/ "./src/components/health.js":
/*!**********************************!*\
  !*** ./src/components/health.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst health = (initMaxHealth, initCurrentHealth = null) => {\r\n  let maxHealth = initMaxHealth;\r\n  let currentHealth =\r\n    initCurrentHealth === null ? initMaxHealth : initCurrentHealth;\r\n\r\n  let suffering = false;\r\n\r\n  /**\r\n   * Heal the given amount of health.\r\n   *\r\n   * @param {*} value\r\n   */\r\n  function heal(value) {\r\n    if (currentHealth + value > maxHealth) {\r\n      currentHealth = maxHealth;\r\n    } else {\r\n      currentHealth += value;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Suffer the given amount of damage.\r\n   *\r\n   * @param {*} value\r\n   */\r\n  function suffer(value) {\r\n    if (currentHealth - value <= 0) {\r\n      currentHealth = 0;\r\n      this.trigger(\"death\");\r\n    } else {\r\n      currentHealth -= value;\r\n      this.trigger(\"suffer\");\r\n    }\r\n  }\r\n\r\n  return {\r\n    isSuffering: () => suffering,\r\n    setSuffering(value) {\r\n      suffering = value;\r\n    },\r\n    getCurrentHealth: () => currentHealth,\r\n    getMaxHealth: () => maxHealth,\r\n    isDead: () => currentHealth === 0,\r\n    heal,\r\n    suffer,\r\n  };\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (health);\r\n\n\n//# sourceURL=webpack:///./src/components/health.js?");

/***/ }),

/***/ "./src/components/shoot.js":
/*!*********************************!*\
  !*** ./src/components/shoot.js ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../kaboom */ \"./src/kaboom.js\");\n\r\n\r\n\r\nconst shoot = () => {\r\n  let timeSinceLastShot = _constants__WEBPACK_IMPORTED_MODULE_0__.default.SHOOT_DELAY;\r\n  // Runs every frame\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.action(() => {\r\n    timeSinceLastShot += _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.dt();\r\n  });\r\n\r\n  /**\r\n   * Check if the game object can shoot.\r\n   *\r\n   * @returns\r\n   */\r\n  function canShoot() {\r\n    return timeSinceLastShot >= _constants__WEBPACK_IMPORTED_MODULE_0__.default.SHOOT_DELAY;\r\n  }\r\n\r\n  /**\r\n   * If the game object can shoot, it shoots.\r\n   */\r\n  function shoot() {\r\n    if (this.canShoot()) {\r\n      this.play(\"shoot\", false);\r\n      timeSinceLastShot = 0;\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.add([\r\n        _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.sprite(\"orb\"),\r\n        _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.pos(this.pos),\r\n        _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.origin(\"center\"),\r\n        \"bullet\",\r\n        {\r\n          direction: this.getViewDirection(),\r\n          add() {\r\n            this.play(\"fly\");\r\n          },\r\n          explode() {\r\n            const bullet = this;\r\n            // Add the explosion effect.\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.add([\r\n              _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.sprite(\"orb_explosion\"),\r\n              _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.pos(bullet.pos),\r\n              _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.origin(\"center\"),\r\n              {\r\n                add() {\r\n                  this.play(\"explode\");\r\n                  _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.wait(0.5, () => {\r\n                    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(this);\r\n                  });\r\n                },\r\n              },\r\n            ]);\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(bullet);\r\n          },\r\n        },\r\n      ]);\r\n    }\r\n  }\r\n\r\n  return {\r\n    shoot,\r\n    canShoot,\r\n    add() {\r\n      // Handle the bullet movement\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.action(\"bullet\", (bullet) => {\r\n        if (!bullet.collided) {\r\n          bullet.move(bullet.direction * _constants__WEBPACK_IMPORTED_MODULE_0__.default.BULLET_SPEED, 0);\r\n        }\r\n\r\n        // remove the bullet if it's out of the scene for performance\r\n        if (bullet.pos.x > this.pos.x + _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.width()) {\r\n          _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(bullet);\r\n        }\r\n      });\r\n\r\n      // Bullet vs. block\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.collides(\"bullet\", \"block\", (bullet, block) => {\r\n        bullet.explode();\r\n      });\r\n\r\n      // Bullet vs. enemy\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.collides(\"bullet\", \"enemy\", (bullet, enemy) => {\r\n        bullet.explode();\r\n        enemy.suffer(1);\r\n        enemy.bounce(this.getViewDirection());\r\n      });\r\n    },\r\n  };\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (shoot);\r\n\n\n//# sourceURL=webpack:///./src/components/shoot.js?");

/***/ }),

/***/ "./src/components/stateMachine.js":
/*!****************************************!*\
  !*** ./src/components/stateMachine.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"states\": () => (/* binding */ states),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../kaboom */ \"./src/kaboom.js\");\n\r\n\r\nconst states = {\r\n  IDLE: \"IDLE\",\r\n  MOVE: \"MOVE\",\r\n  FLY: \"FLY\",\r\n  WAIT: \"WAIT\",\r\n  SHOOT: \"SHOOT\",\r\n  ATTACK: \"ATTACK\",\r\n  JUMP: \"JUMP\",\r\n  FALL: \"FALL\",\r\n  SUFFER: \"SUFFER\",\r\n  DIE: \"DIE\",\r\n};\r\n\r\nconst stateMachine = (initialState, stateActions) => {\r\n  let currentState = initialState;\r\n  let lastState = initialState;\r\n  let delayedState = null;\r\n  let delayedTimeout = 0;\r\n  let delayedContext = null;\r\n\r\n  /**\r\n   * Change the game object to the given state.\r\n   *\r\n   * @param {*} state The state we want to set.\r\n   * @param {*} context The context game object.\r\n   * @param {*} timeout If set, change the state after the given amount of seconds is expired\r\n   * @returns True if the state change is possible or was successfull.\r\n   */\r\n  const changeState = (state, context, timeout = null) => {\r\n    // Change state after timeout\r\n    if (timeout !== null) {\r\n      delayedState = state;\r\n      delayedContext = context;\r\n      delayedTimeout = timeout;\r\n\r\n      return true;\r\n    }\r\n\r\n    delayedState = null;\r\n    delayedTimeout = 0;\r\n    delayedContext = null;\r\n\r\n    if (\r\n      stateActions[state] &&\r\n      ((stateActions[state].canResolve &&\r\n        stateActions[state].canResolve(context)) ||\r\n        stateActions[state].canResolve === undefined)\r\n    ) {\r\n      if (currentState !== states.SUFFER) {\r\n        lastState = currentState;\r\n      }\r\n      currentState = state;\r\n      stateActions[state].resolve(context);\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n\r\n  return {\r\n    state: currentState,\r\n    getState: () => currentState,\r\n    getLastState: () => lastState,\r\n    isCurrentState: (value) => value === currentState,\r\n    changeState,\r\n    add() {\r\n      stateActions[currentState].resolve(this);\r\n    },\r\n    update() {\r\n      if (delayedState !== null) {\r\n        delayedTimeout -= _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.dt();\r\n        if (delayedTimeout <= 0) {\r\n          changeState(delayedState, delayedContext);\r\n        }\r\n      }\r\n\r\n      if (_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sceneData().lost === false) {\r\n        stateActions[currentState].updateAction(this);\r\n      }\r\n    },\r\n  };\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (stateMachine);\r\n\n\n//# sourceURL=webpack:///./src/components/stateMachine.js?");

/***/ }),

/***/ "./src/components/viewDirection.js":
/*!*****************************************!*\
  !*** ./src/components/viewDirection.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nconst viewDirection = (initialViewDirection = 1) => {\r\n  let viewDirection = initialViewDirection;\r\n\r\n  return {\r\n    setViewDirection(value) {\r\n      viewDirection = value;\r\n    },\r\n    getViewDirection() {\r\n      return viewDirection;\r\n    },\r\n    lookLeft() {\r\n      viewDirection = -1;\r\n    },\r\n    lookRight() {\r\n      viewDirection = 1;\r\n    },\r\n  };\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (viewDirection);\r\n\n\n//# sourceURL=webpack:///./src/components/viewDirection.js?");

/***/ }),

/***/ "./src/constants.js":
/*!**************************!*\
  !*** ./src/constants.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n  JUMP_FORCE: 280,\r\n  MOVE_SPEED: 80,\r\n  ENEMY_SPEED: 50,\r\n  BULLET_SPEED: 320,\r\n  SHOOT_DELAY: 0.25, // seconds\r\n  ATTACK_DELAY: 0.25, // seconds\r\n});\r\n\n\n//# sourceURL=webpack:///./src/constants.js?");

/***/ }),

/***/ "./src/enemies/goblin.js":
/*!*******************************!*\
  !*** ./src/enemies/goblin.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"goblinConfig\": () => (/* binding */ goblinConfig),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../kaboom */ \"./src/kaboom.js\");\n/* harmony import */ var _components_stateMachine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/stateMachine */ \"./src/components/stateMachine.js\");\n/* harmony import */ var _components_health__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/health */ \"./src/components/health.js\");\n/* harmony import */ var _components_bounce__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/bounce */ \"./src/components/bounce.js\");\n/* harmony import */ var _components_distance__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/distance */ \"./src/components/distance.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../player */ \"./src/player.js\");\n/* harmony import */ var _components_viewDirection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/viewDirection */ \"./src/components/viewDirection.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst stateActions = {\r\n  /**\r\n   * IDLE\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.IDLE]: {\r\n    updateAction: (goblin) => {\r\n      const player = (0,_player__WEBPACK_IMPORTED_MODULE_6__.getPlayer)();\r\n      if (\r\n        goblin.distanceToGameobject(player) < 150 &&\r\n        goblin.distanceToGameobject(player) > 10\r\n      ) {\r\n        goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.MOVE, goblin);\r\n      }\r\n    },\r\n    resolve: (goblin) => {\r\n      goblin.changeSprite(\"goblin\");\r\n      goblin.play(\"idle\");\r\n    },\r\n    canResolve: (goblin) => {\r\n      return !goblin.isSuffering();\r\n    },\r\n  },\r\n  /**\r\n   * WAIT\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.WAIT]: {\r\n    updateAction: (goblin) => {},\r\n    resolve: (goblin) => {\r\n      goblin.changeSprite(\"goblin\");\r\n      goblin.play(\"idle\");\r\n      goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.IDLE, goblin, 1);\r\n    },\r\n    canResolve: (goblin) => {\r\n      return !goblin.isSuffering();\r\n    },\r\n  },\r\n  /**\r\n   * MOVE\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.MOVE]: {\r\n    updateAction: (goblin) => {\r\n      const player = (0,_player__WEBPACK_IMPORTED_MODULE_6__.getPlayer)();\r\n      goblin.move(_constants__WEBPACK_IMPORTED_MODULE_0__.default.ENEMY_SPEED * goblin.getViewDirection(), 0);\r\n      goblin.scale.x = goblin.getViewDirection();\r\n\r\n      if (goblin.distanceToGameobject(player) > 10) {\r\n        goblin.setViewDirection(goblin.gameobjectPos(player));\r\n      } else {\r\n        if (goblin.distanceToGameobject(player, \"y\") > 20) {\r\n          goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.WAIT, goblin);\r\n        }\r\n      }\r\n    },\r\n    resolve: (goblin) => {\r\n      goblin.changeSprite(\"goblin\");\r\n      goblin.play(\"run\");\r\n    },\r\n    canResolve: (goblin) => {\r\n      return !goblin.isSuffering();\r\n    },\r\n  },\r\n  /**\r\n   * Attack\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.ATTACK]: {\r\n    updateAction: (goblin) => {},\r\n    resolve: (goblin) => {\r\n      goblin.changeSprite(\"goblin_attack\");\r\n      goblin.play(\"attack\", false);\r\n      goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.MOVE, goblin, 1.2);\r\n    },\r\n    canResolve: (goblin) => {\r\n      return !goblin.isSuffering();\r\n    },\r\n  },\r\n  /**\r\n   * Suffer\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.SUFFER]: {\r\n    updateAction: (goblin) => {},\r\n    resolve: (goblin) => {\r\n      goblin.changeSprite(\"goblin\");\r\n      goblin.setSuffering(true);\r\n      goblin.play(\"suffer\", false);\r\n    },\r\n    canResolve: (goblin) => {\r\n      return true;\r\n    },\r\n  },\r\n  /**\r\n   * Die\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.DIE]: {\r\n    updateAction: (goblin) => {},\r\n    resolve: (goblin) => {\r\n      goblin.changeSprite(\"goblin\");\r\n      goblin.play(\"die\");\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.wait(0.5, () => {\r\n        _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(goblin);\r\n      });\r\n    },\r\n    canResolve: (goblin) => {\r\n      return true;\r\n    },\r\n  },\r\n};\r\n\r\nconst onGoblinAdded = (goblin) => {\r\n  // If the goblin dies\r\n  goblin.on(\"death\", () => {\r\n    goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.DIE, goblin);\r\n  });\r\n\r\n  // When the goblin suffers damage\r\n  goblin.on(\"suffer\", () => {\r\n    goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.SUFFER, goblin);\r\n  });\r\n\r\n  // If the goblin collides with the player\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.collides(\"player\", \"goblin\", (player, goblin) => {\r\n    if (!goblin.isCurrentState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.DIE)) {\r\n      if (goblin.distanceToGameobject(player, \"y\") < 5) {\r\n        goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.ATTACK, goblin);\r\n        player.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.SUFFER, player);\r\n        player.suffer(1);\r\n        _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.camShake(6);\r\n        player.bounce(goblin.getViewDirection());\r\n      } else {\r\n        if (!goblin.isCurrentState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.SUFFER)) {\r\n          goblin.suffer(1);\r\n          goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.SUFFER, goblin);\r\n        }\r\n        player.doJump(true);\r\n      }\r\n    }\r\n  });\r\n\r\n  // If the goblin collides with each other\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.collides(\"goblin\", \"goblin\", (goblin, goblin2) => {\r\n    const player = (0,_player__WEBPACK_IMPORTED_MODULE_6__.getPlayer)();\r\n\r\n    if (!goblin.isCurrentState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.ATTACKING)) {\r\n      if (\r\n        goblin.distanceToGameobject(player) >\r\n        goblin2.distanceToGameobject(player)\r\n      ) {\r\n        goblin.move(goblin.gameobjectPos(player) * -1 * 10);\r\n        goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.WAIT, goblin);\r\n      }\r\n    }\r\n    if (!goblin2.isCurrentState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.ATTACKING)) {\r\n      if (\r\n        goblin2.distanceToGameobject(player) >\r\n        goblin.distanceToGameobject(player)\r\n      ) {\r\n        goblin2.move(goblin2.getViewDirection() * -1 * 10);\r\n        goblin2.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.WAIT, goblin2);\r\n      }\r\n    }\r\n  });\r\n\r\n  // When an animation of the goblin ends\r\n  goblin.on(\"animEnd\", (anim) => {\r\n    if (anim === \"suffer\") {\r\n      goblin.setSuffering(false);\r\n      goblin.changeState(goblin.getLastState(), goblin);\r\n    }\r\n  });\r\n};\r\n\r\nconst spawnGoblin = (pos) => {\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.add([\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.sprite(\"goblin\", {\r\n      frame: 22,\r\n    }),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.solid(),\r\n    \"goblin\",\r\n    \"enemy\",\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.scale(1),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.origin(\"center\"),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.pos(pos),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.body(),\r\n    (0,_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.default)(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.IDLE, stateActions),\r\n    (0,_components_health__WEBPACK_IMPORTED_MODULE_3__.default)(3),\r\n    (0,_components_bounce__WEBPACK_IMPORTED_MODULE_4__.default)(),\r\n    (0,_components_distance__WEBPACK_IMPORTED_MODULE_5__.default)(),\r\n    (0,_components_viewDirection__WEBPACK_IMPORTED_MODULE_7__.default)(),\r\n    {\r\n      add() {\r\n        onGoblinAdded(this);\r\n      },\r\n    },\r\n  ]);\r\n};\r\n\r\nconst goblinConfig = () => {\r\n  return [\r\n    {\r\n      add() {\r\n        spawnGoblin(this.pos);\r\n        _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(this);\r\n      },\r\n    },\r\n  ];\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (goblinConfig);\r\n\n\n//# sourceURL=webpack:///./src/enemies/goblin.js?");

/***/ }),

/***/ "./src/enemies/goblinBomber.js":
/*!*************************************!*\
  !*** ./src/enemies/goblinBomber.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"bomberGoblinConfig\": () => (/* binding */ bomberGoblinConfig),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants */ \"./src/constants.js\");\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../kaboom */ \"./src/kaboom.js\");\n/* harmony import */ var _components_stateMachine__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../components/stateMachine */ \"./src/components/stateMachine.js\");\n/* harmony import */ var _components_health__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/health */ \"./src/components/health.js\");\n/* harmony import */ var _components_bounce__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/bounce */ \"./src/components/bounce.js\");\n/* harmony import */ var _components_distance__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/distance */ \"./src/components/distance.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../player */ \"./src/player.js\");\n/* harmony import */ var _components_viewDirection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/viewDirection */ \"./src/components/viewDirection.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst ATTACK_DELAY = 3;\r\nconst EXPLODING_TIME = 3;\r\n\r\nconst stateActions = {\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.IDLE]: {\r\n    updateAction: (goblin) => {\r\n      const player = (0,_player__WEBPACK_IMPORTED_MODULE_6__.getPlayer)();\r\n      if (goblin.distanceToGameobject(player) < 100) {\r\n        const viewDirection = goblin.gameobjectPos(player);\r\n        goblin.setViewDirection(viewDirection);\r\n        goblin.scale.x = viewDirection;\r\n        goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.ATTACK, goblin);\r\n      }\r\n    },\r\n    resolve: (goblin) => {\r\n      goblin.play(\"idle\");\r\n    },\r\n    canResolve: (goblin) => {\r\n      return true;\r\n    },\r\n  },\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.ATTACK]: {\r\n    updateAction: (goblin) => {},\r\n    resolve: (goblin) => {\r\n      goblin.play(\"attack\", false);\r\n      goblin.timeSinceLastAttack = 0;\r\n    },\r\n    canResolve: (goblin) => {\r\n      return goblin.timeSinceLastAttack >= ATTACK_DELAY;\r\n    },\r\n  },\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.SUFFER]: {\r\n    updateAction: (goblin) => {},\r\n    resolve: (goblin) => {},\r\n    canResolve: (goblin) => {\r\n      return true;\r\n    },\r\n  },\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.DIE]: {\r\n    updateAction: (goblin) => {},\r\n    resolve: (goblin) => {},\r\n    canResolve: (goblin) => {\r\n      return true;\r\n    },\r\n  },\r\n};\r\n\r\nconst spawnBomb = (goblin) => {\r\n  const position = { ...goblin.pos };\r\n  position.x = position.x - goblin.getViewDirection() * -10;\r\n  position.y = position.y - 10;\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.add([\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.sprite(\"bomb_ticking\"),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.pos(position),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.origin(\"center\"),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.body(),\r\n    \"bomb\",\r\n    (0,_components_viewDirection__WEBPACK_IMPORTED_MODULE_7__.default)(goblin.getViewDirection()),\r\n    {\r\n      lifeTime: 0,\r\n      add() {\r\n        this.play(\"effect\");\r\n      },\r\n      update() {\r\n        this.lifeTime += _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.dt();\r\n        if (!this.grounded()) {\r\n          this.move(this.getViewDirection() * 50, 0);\r\n          if (this.lifeTime < 0.5) {\r\n            this.jump(70);\r\n          }\r\n        }\r\n        if (this.lifeTime > EXPLODING_TIME) {\r\n          _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.add([\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.text(\"Booom!\", 4),\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.pos(this.pos),\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.origin(\"center\"),\r\n            {\r\n              add() {\r\n                const boomText = this;\r\n                _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.wait(1, function () {\r\n                  _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(boomText);\r\n                });\r\n              },\r\n              update() {\r\n                this.pos.y -= 0.3;\r\n              },\r\n            },\r\n          ]);\r\n          _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.camShake(4);\r\n          _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(this);\r\n        }\r\n      },\r\n    },\r\n  ]);\r\n};\r\n\r\nconst onBomberGoblinAdded = (goblin) => {\r\n  // If the goblin dies\r\n  goblin.on(\"death\", () => {\r\n    goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.DIE, goblin);\r\n  });\r\n\r\n  goblin.on(\"animEnd\", (anim) => {\r\n    if (anim === \"attack\") {\r\n      spawnBomb(goblin);\r\n      goblin.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.IDLE, goblin);\r\n    }\r\n  });\r\n};\r\n\r\nconst spawnBomberGoblin = (pos) => {\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.add([\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.sprite(\"goblin_bomber\", {\r\n      frame: 0,\r\n    }),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.solid(),\r\n    \"bomber_goblin\",\r\n    \"enemy\",\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.scale(1),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.origin(\"center\"),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.pos(pos),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.body(),\r\n    (0,_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.default)(_components_stateMachine__WEBPACK_IMPORTED_MODULE_2__.states.IDLE, stateActions),\r\n    (0,_components_health__WEBPACK_IMPORTED_MODULE_3__.default)(5),\r\n    (0,_components_bounce__WEBPACK_IMPORTED_MODULE_4__.default)(),\r\n    (0,_components_distance__WEBPACK_IMPORTED_MODULE_5__.default)(),\r\n    (0,_components_viewDirection__WEBPACK_IMPORTED_MODULE_7__.default)(),\r\n    {\r\n      timeSinceLastAttack: ATTACK_DELAY,\r\n      add() {\r\n        onBomberGoblinAdded(this);\r\n      },\r\n      update() {\r\n        this.timeSinceLastAttack += _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.dt();\r\n      },\r\n    },\r\n  ]);\r\n};\r\n\r\nconst bomberGoblinConfig = () => {\r\n  return [\r\n    {\r\n      add() {\r\n        spawnBomberGoblin(this.pos);\r\n        _kaboom__WEBPACK_IMPORTED_MODULE_1__.default.destroy(this);\r\n      },\r\n    },\r\n  ];\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (bomberGoblinConfig);\r\n\n\n//# sourceURL=webpack:///./src/enemies/goblinBomber.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./kaboom */ \"./src/kaboom.js\");\n/* harmony import */ var _sprites__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./sprites */ \"./src/sprites.js\");\n/* harmony import */ var _scenes_main__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scenes/main */ \"./src/scenes/main.js\");\n\r\n\r\n\r\n\r\n(0,_sprites__WEBPACK_IMPORTED_MODULE_1__.default)();\r\n\r\n_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.scene(\"main\", _scenes_main__WEBPACK_IMPORTED_MODULE_2__.default);\r\n\r\n_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.start(\"main\");\r\n\n\n//# sourceURL=webpack:///./src/index.js?");

/***/ }),

/***/ "./src/kaboom.js":
/*!***********************!*\
  !*** ./src/kaboom.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var kaboom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! kaboom */ \"./node_modules/kaboom/dist/kaboom.mjs\");\n\r\n\r\nconst k = (0,kaboom__WEBPACK_IMPORTED_MODULE_0__.default)({\r\n  scale: 5,\r\n  clearColor: [0, 0, 0, 1],\r\n  width: 240, // width of canvas\r\n  height: 160,\r\n});\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (k);\r\n\n\n//# sourceURL=webpack:///./src/kaboom.js?");

/***/ }),

/***/ "./src/player.js":
/*!***********************!*\
  !*** ./src/player.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getPlayer\": () => (/* binding */ getPlayer),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./kaboom */ \"./src/kaboom.js\");\n/* harmony import */ var _components_shoot__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./components/shoot */ \"./src/components/shoot.js\");\n/* harmony import */ var _components_health__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/health */ \"./src/components/health.js\");\n/* harmony import */ var _components_control__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/control */ \"./src/components/control.js\");\n/* harmony import */ var _components_stateMachine__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/stateMachine */ \"./src/components/stateMachine.js\");\n/* harmony import */ var _constants__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./constants */ \"./src/constants.js\");\n/* harmony import */ var _components_bounce__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./components/bounce */ \"./src/components/bounce.js\");\n/* harmony import */ var _components_viewDirection__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./components/viewDirection */ \"./src/components/viewDirection.js\");\n/* harmony import */ var _components_attack__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/attack */ \"./src/components/attack.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst stateActions = {\r\n  /**\r\n   * Idle\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.IDLE]: {\r\n    updateAction: (player) => {},\r\n    resolve: (player) => {\r\n      player.play(\"idle\");\r\n    },\r\n    canResolve: (player) => {\r\n      return !player.isDead();\r\n    },\r\n  },\r\n  /**\r\n   * Move\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.MOVE]: {\r\n    updateAction: (player) => {},\r\n    resolve: (player) => {\r\n      player.play(\"run\");\r\n    },\r\n    canResolve: (player) => {\r\n      return player.grounded() && !player.isDead() && !player.isSuffering();\r\n    },\r\n  },\r\n  /**\r\n   * Shoot\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.SHOOT]: {\r\n    updateAction: (player) => {},\r\n    resolve: (player) => {\r\n      player.shoot();\r\n      player.play(\"shoot\", false);\r\n    },\r\n    canResolve: (player) => {\r\n      return player.canShoot() && !player.isDead() && !player.isSuffering();\r\n    },\r\n  },\r\n  /**\r\n   * Attack\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.ATTACK]: {\r\n    updateAction: (player) => {},\r\n    resolve: (player) => {\r\n      player.attack();\r\n      player.play(\"shoot\", false);\r\n    },\r\n    canResolve: (player) => {\r\n      return player.canAttack() && !player.isDead() && !player.isSuffering();\r\n    },\r\n  },\r\n  /**\r\n   * Jump\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.JUMP]: {\r\n    updateAction: (player) => {},\r\n    resolve: (player) => {\r\n      player.doJump();\r\n    },\r\n    canResolve: (player) => {\r\n      return player.canJump() && !player.isDead() && !player.isSuffering();\r\n    },\r\n  },\r\n  /**\r\n   * Fall\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.FALL]: {\r\n    updateAction: (player) => {},\r\n    resolve: (player) => {\r\n      player.play(\"fall\");\r\n    },\r\n    canResolve: (player) => {\r\n      return !player.isDead() && !player.isSuffering();\r\n    },\r\n  },\r\n  /**\r\n   * Suffer\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.SUFFER]: {\r\n    updateAction: (player) => {},\r\n    resolve: (player) => {\r\n      player.setSuffering(true);\r\n      player.play(\"suffer\", false);\r\n    },\r\n    canResolve: (player) => {\r\n      return !player.isDead();\r\n    },\r\n  },\r\n  /**\r\n   * Die\r\n   */\r\n  [_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.DIE]: {\r\n    updateAction: (player) => {},\r\n    resolve: (player) => {\r\n      player.play(\"die\", false);\r\n    },\r\n  },\r\n};\r\n\r\nconst addJumpEffect = (player) => {\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.add([\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"jump_effect\"),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.pos(player.pos),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.origin(\"center\"),\r\n    \"jump_effect\",\r\n    {\r\n      add() {\r\n        this.play(player.isDoubleJumpging ? \"doubleJump\" : \"jump\");\r\n        _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.wait(0.3, () => {\r\n          _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.destroy(this);\r\n        });\r\n      },\r\n    },\r\n  ]);\r\n};\r\n\r\nconst initPlayer = () => {\r\n  const player = _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.add([\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"player\", {\r\n      frame: 40,\r\n      animSpeed: 0.15,\r\n    }),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.origin(\"center\"),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.pos(30, 200),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.scale(1),\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.body(),\r\n    (0,_components_shoot__WEBPACK_IMPORTED_MODULE_1__.default)(),\r\n    (0,_components_attack__WEBPACK_IMPORTED_MODULE_8__.default)(),\r\n    (0,_components_health__WEBPACK_IMPORTED_MODULE_2__.default)(3),\r\n    (0,_components_control__WEBPACK_IMPORTED_MODULE_3__.default)(),\r\n    (0,_components_bounce__WEBPACK_IMPORTED_MODULE_6__.default)(),\r\n    (0,_components_viewDirection__WEBPACK_IMPORTED_MODULE_7__.default)(),\r\n    (0,_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.default)(_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.IDLE, stateActions),\r\n    \"player\",\r\n    {\r\n      isDoubleJumpging: false,\r\n      add() {\r\n        this.on(\"animEnd\", (anim) => {\r\n          if (this.grounded()) {\r\n            if (_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.keyIsDown(\"left\") || _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.keyIsDown(\"right\")) {\r\n              player.play(\"run\");\r\n            } else {\r\n              player.play(\"idle\");\r\n            }\r\n          } else {\r\n            if (anim === \"jump\" || anim === \"jumpRoll\" || anim === \"shoot\") {\r\n              this.play(\"fall\");\r\n            }\r\n          }\r\n          if (anim === \"suffer\") {\r\n            player.setSuffering(false);\r\n            player.changeState(player.getLastState(), player);\r\n          }\r\n        });\r\n      },\r\n      /**\r\n       * Check if the user can jump.\r\n       * @returns\r\n       */\r\n      canJump() {\r\n        return this.grounded() || this.isDoubleJumpging === false;\r\n      },\r\n      /**\r\n       * Perform the jump if possible.\r\n       */\r\n      doJump(small = false) {\r\n        if (this.canJump()) {\r\n          if (!this.grounded()) {\r\n            this.isDoubleJumpging = true;\r\n            this.play(\"jumpRoll\", false);\r\n          } else {\r\n            this.play(\"jump\", false);\r\n          }\r\n\r\n          addJumpEffect(this);\r\n          this.jump(small ? _constants__WEBPACK_IMPORTED_MODULE_5__.default.JUMP_FORCE / 2 : _constants__WEBPACK_IMPORTED_MODULE_5__.default.JUMP_FORCE);\r\n        }\r\n      },\r\n      /**\r\n       * Run in the given direction.\r\n       * @param {*} direction\r\n       */\r\n      run(direction) {\r\n        this.setViewDirection(direction);\r\n        this.scale.x = direction;\r\n        this.move(this.getViewDirection() * _constants__WEBPACK_IMPORTED_MODULE_5__.default.MOVE_SPEED, 0);\r\n      },\r\n      /**\r\n       * Checks if the player is dead.\r\n       * @returns\r\n       */\r\n      isDead() {\r\n        return this.getState() === _components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.DIE;\r\n      },\r\n      /**\r\n       * Check if the player can interact (via keys).\r\n       * @returns\r\n       */\r\n      canInteract() {\r\n        return this.getState() !== _components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.SUFFER && !this.isDead();\r\n      },\r\n    },\r\n  ]);\r\n\r\n  // Player comes back to earth again\r\n  player.on(\"grounded\", () => {\r\n    player.isDoubleJumpging = false;\r\n\r\n    if (_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.keyIsDown(\"left\") || _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.keyIsDown(\"right\")) {\r\n      player.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.MOVE, player);\r\n    } else {\r\n      player.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.IDLE, player);\r\n    }\r\n  });\r\n\r\n  player.on(\"death\", () => {\r\n    player.changeState(_components_stateMachine__WEBPACK_IMPORTED_MODULE_4__.states.DIE, player);\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.wait(0.75, () => {\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.destroy(player);\r\n    });\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sceneData().lost = true;\r\n  });\r\n\r\n  player.action(() => {\r\n    if (player.pos.y > _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.height() * 3) {\r\n      player.suffer(player.getMaxHealth());\r\n      player.trigger(\"death\");\r\n    }\r\n  });\r\n\r\n  return player;\r\n};\r\n\r\nconst getPlayer = () => {\r\n  return _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.get(\"player\")[0];\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (initPlayer);\r\n\n\n//# sourceURL=webpack:///./src/player.js?");

/***/ }),

/***/ "./src/scenes/main.js":
/*!****************************!*\
  !*** ./src/scenes/main.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../kaboom */ \"./src/kaboom.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../player */ \"./src/player.js\");\n/* harmony import */ var _enemies_goblin__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../enemies/goblin */ \"./src/enemies/goblin.js\");\n/* harmony import */ var _ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../ui */ \"./src/ui.js\");\n/* harmony import */ var _camera__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../camera */ \"./src/camera.js\");\n/* harmony import */ var _ambient_bird__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../ambient/bird */ \"./src/ambient/bird.js\");\n/* harmony import */ var _enemies_goblinBomber__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../enemies/goblinBomber */ \"./src/enemies/goblinBomber.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst level = [\r\n  \"                                                                                             \",\r\n  \"T                                                                                            \",\r\n  \"H                                                                                            \",\r\n  \"H                                                                                            \",\r\n  \"H                                                                                            \",\r\n  \"H                                                                                            \",\r\n  \"H                                                                                            \",\r\n  \"H                                                                                            \",\r\n  \"H                              <>                                                            \",\r\n  \"H              O         <---->                                                              \",\r\n  \"H           <---->                                                                           \",\r\n  \"H                                          <->                                               \",\r\n  \"L===T    B          G               G                                                        \",\r\n  \"####L===============================]WWWW[===================================================\",\r\n  \"####################################)WWWW(####################################################\",\r\n];\r\n\r\nconst main = () => {\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sceneData().lost = false;\r\n\r\n  const player = (0,_player__WEBPACK_IMPORTED_MODULE_1__.default)();\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.layers([\"bg\", \"ambient_bg\", \"obj\", \"ambient\", \"ui\"], \"obj\");\r\n\r\n  // Handle the camera\r\n  (0,_camera__WEBPACK_IMPORTED_MODULE_4__.default)();\r\n\r\n  // Initialize the ui\r\n  (0,_ui__WEBPACK_IMPORTED_MODULE_3__.default)();\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.add([_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"background\"), _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.layer(\"bg\")]);\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.add([_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"background2\"), _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.layer(\"bg\")]);\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.addLevel(level, {\r\n    width: 16,\r\n    height: 16,\r\n    pos: _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.vec2(0, _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.height() / 2),\r\n    \"=\": [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 1,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n      {\r\n        add() {\r\n          const random = Math.random();\r\n          if (random > 0.9 || random < 0.1) {\r\n            const sprite = random > 0.9 ? \"grass\" : \"drygrass\";\r\n            const position = { ...this.pos };\r\n            position.x += 8;\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.add([\r\n              _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(sprite),\r\n              \"ambient\",\r\n              _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.origin(\"bot\"),\r\n              _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.pos(position),\r\n            ]);\r\n          }\r\n        },\r\n      },\r\n    ],\r\n    T: [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 2,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    H: [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 14,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    L: [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 27,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    \"#\": [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 13,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    \"]\": [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 2,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    \"[\": [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 0,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    \")\": [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 14,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    \"(\": [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 12,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    \"<\": [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 42,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    \"-\": [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 43,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    \">\": [\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"tileset\", {\r\n        frame: 44,\r\n      }),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.solid(),\r\n      \"block\",\r\n    ],\r\n    W: [\r\n      {\r\n        add() {\r\n          const waterfall = _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.add([\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"waterfall\"),\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.layer(\"ambient_bg\"),\r\n            \"waterfall\",\r\n            _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.pos({ ...this.pos, y: this.pos.y + 2 }),\r\n          ]);\r\n          waterfall.play(\"waterfall\");\r\n          //k.destroy(this);\r\n        },\r\n      },\r\n    ],\r\n    G: (0,_enemies_goblin__WEBPACK_IMPORTED_MODULE_2__.goblinConfig)(),\r\n    O: (0,_enemies_goblinBomber__WEBPACK_IMPORTED_MODULE_6__.default)(),\r\n    B: (0,_ambient_bird__WEBPACK_IMPORTED_MODULE_5__.birdConfig)(),\r\n  });\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (main);\r\n\n\n//# sourceURL=webpack:///./src/scenes/main.js?");

/***/ }),

/***/ "./src/sprites.js":
/*!************************!*\
  !*** ./src/sprites.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./kaboom */ \"./src/kaboom.js\");\n\r\n\r\nconst loadSprites = () => {\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadRoot(\"./resources/sprites/\");\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"tileset\", \"tileset.png\", {\r\n    sliceX: 12,\r\n    sliceY: 6,\r\n  });\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"player\", \"hero.png\", {\r\n    sliceX: 8,\r\n    sliceY: 15,\r\n    anims: {\r\n      idle: {\r\n        from: 40,\r\n        to: 43,\r\n      },\r\n      run: {\r\n        from: 8,\r\n        to: 13,\r\n      },\r\n      fall: {\r\n        from: 48,\r\n        to: 50,\r\n      },\r\n      jump: {\r\n        from: 56,\r\n        to: 58,\r\n      },\r\n      jumpRoll: {\r\n        from: 72,\r\n        to: 74,\r\n      },\r\n      shoot: {\r\n        from: 24,\r\n        to: 24,\r\n      },\r\n      die: {\r\n        from: 0,\r\n        to: 7,\r\n      },\r\n      suffer: {\r\n        from: 64,\r\n        to: 66,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"sword_effect\", \"sword_effect.png\", {\r\n    sliceX: 4,\r\n    sliceY: 1,\r\n    anims: {\r\n      effect: {\r\n        from: 0,\r\n        to: 3,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"hit_sparkle\", \"hit_sparkle.png\", {\r\n    sliceX: 4,\r\n    sliceY: 1,\r\n    anims: {\r\n      effect: {\r\n        from: 0,\r\n        to: 3,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"jump_effect\", \"hero.png\", {\r\n    sliceX: 8,\r\n    sliceY: 15,\r\n    anims: {\r\n      jump: {\r\n        from: 96,\r\n        to: 99,\r\n      },\r\n      doubleJump: {\r\n        from: 97,\r\n        to: 99,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"goblin\", \"goblin.png\", {\r\n    sliceX: 6,\r\n    sliceY: 5,\r\n    anims: {\r\n      run: {\r\n        from: 0,\r\n        to: 5,\r\n      },\r\n      idle: {\r\n        from: 19,\r\n        to: 21,\r\n      },\r\n      die: {\r\n        from: 6,\r\n        to: 11,\r\n      },\r\n      suffer: {\r\n        from: 24,\r\n        to: 26,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"goblin_bomber\", \"goblin_bomber.png\", {\r\n    sliceX: 6,\r\n    sliceY: 4,\r\n    anims: {\r\n      attack: {\r\n        from: 0,\r\n        to: 5,\r\n      },\r\n      die: {\r\n        from: 6,\r\n        to: 11,\r\n      },\r\n      idle: {\r\n        from: 12,\r\n        to: 15,\r\n      },\r\n      suffer: {\r\n        from: 18,\r\n        to: 20,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"bomb_ticking\", \"bomb_ticking.png\", {\r\n    sliceX: 3,\r\n    sliceY: 1,\r\n    anims: {\r\n      effect: {\r\n        from: 0,\r\n        to: 2,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"bomb_exploding\", \"bomb_exploding.png\", {\r\n    sliceX: 8,\r\n    sliceY: 1,\r\n    anims: {\r\n      effect: {\r\n        from: 0,\r\n        to: 7,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"goblin_attack\", \"goblin.png\", {\r\n    sliceX: 4,\r\n    sliceY: 5,\r\n    anims: {\r\n      attack: {\r\n        from: 8,\r\n        to: 11,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"orb\", \"orb_flying.png\", {\r\n    sliceX: 6,\r\n    sliceY: 1,\r\n    anims: {\r\n      fly: {\r\n        from: 0,\r\n        to: 5,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"orb_explosion\", \"orb_exploding.png\", {\r\n    sliceX: 6,\r\n    sliceY: 1,\r\n    anims: {\r\n      explode: {\r\n        from: 0,\r\n        to: 5,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"heart\", \"hearts_hud.png\");\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"background\", \"background.png\");\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"background2\", \"background_2.png\");\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"grass\", \"grass.png\");\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"drygrass\", \"drygrass.png\");\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"waterfall\", \"waterfall.png\", {\r\n    sliceX: 4,\r\n    sliceY: 1,\r\n    anims: {\r\n      waterfall: {\r\n        from: 0,\r\n        to: 4,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"bird\", \"animals.png\", {\r\n    sliceX: 12,\r\n    sliceY: 5,\r\n    anims: {\r\n      idle: {\r\n        from: 0,\r\n        to: 7,\r\n      },\r\n      fly: {\r\n        from: 12,\r\n        to: 14,\r\n      },\r\n      walk: {\r\n        from: 24,\r\n        to: 26,\r\n      },\r\n    },\r\n  });\r\n\r\n  _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.loadSprite(\"bunny\", \"animals.png\", {\r\n    sliceX: 6,\r\n    sliceY: 5,\r\n    anims: {\r\n      idle: {\r\n        from: 24,\r\n        to: 27,\r\n      },\r\n      walk: {\r\n        from: 18,\r\n        to: 23,\r\n      },\r\n    },\r\n  });\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (loadSprites);\r\n\n\n//# sourceURL=webpack:///./src/sprites.js?");

/***/ }),

/***/ "./src/ui.js":
/*!*******************!*\
  !*** ./src/ui.js ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _kaboom__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./kaboom */ \"./src/kaboom.js\");\n/* harmony import */ var _player__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./player */ \"./src/player.js\");\n\r\n\r\n\r\nconst initUi = () => {\r\n  const player = (0,_player__WEBPACK_IMPORTED_MODULE_1__.getPlayer)();\r\n  const hearts = [];\r\n\r\n  function addButton(buttonText, pos, callback) {\r\n    const bg = _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.add([\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.pos(pos),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.rect(60, 30),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.origin(\"center\"),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.color(1, 1, 1),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.layer(\"ui\"),\r\n    ]);\r\n\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.add([\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.text(buttonText),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.pos(pos),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.origin(\"center\"),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.color(0, 0, 0),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.layer(\"ui\"),\r\n    ]);\r\n\r\n    bg.action(() => {\r\n      if (bg.isHovered()) {\r\n        bg.color = _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.rgb(0.8, 0.8, 0.8);\r\n        if (_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.mouseIsClicked()) {\r\n          callback();\r\n        }\r\n      } else {\r\n        bg.color = _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.rgb(1, 1, 1);\r\n      }\r\n    });\r\n  }\r\n\r\n  const addHeart = () => {\r\n    return _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.add([\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.sprite(\"heart\"),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.pos((hearts.length + 1) * 20, 10),\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.layer(\"ui\"),\r\n    ]);\r\n  };\r\n\r\n  for (let i = 1; i <= player.getCurrentHealth(); i++) {\r\n    hearts.push(addHeart());\r\n  }\r\n\r\n  player.action(() => {\r\n    const currentHealth = player.getCurrentHealth();\r\n    const numberOfHearts = hearts.length;\r\n\r\n    if (currentHealth > numberOfHearts) {\r\n      hearts.push(addHeart());\r\n    } else if (currentHealth < numberOfHearts) {\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.destroy(hearts.pop());\r\n    }\r\n  });\r\n\r\n  player.on(\"death\", () => {\r\n    _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.add([_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.text(\"Ooops, you're dead!\", 10), _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.pos(20, 20), _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.layer(\"ui\")]);\r\n    addButton(\"Retry\", _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.vec2(_kaboom__WEBPACK_IMPORTED_MODULE_0__.default.width() / 2, _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.height() / 2), () => {\r\n      _kaboom__WEBPACK_IMPORTED_MODULE_0__.default.go(\"main\");\r\n    });\r\n  });\r\n};\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (initUi);\r\n\n\n//# sourceURL=webpack:///./src/ui.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;